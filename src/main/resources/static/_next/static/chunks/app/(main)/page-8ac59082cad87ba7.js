(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7974],{9386:function(e,t,s){Promise.resolve().then(s.bind(s,9852))},9852:function(e,t,s){"use strict";s.r(t);var n=s(9268),r=s(3702),l=s(8298),i=s(8176),a=s(6006),o=s(8671),c=s(3429),d=s(7537),u=s(7389),m=s(4046),v=s(6008),x=s(2723),h=s(2469),g=s(4390),f=s(7690),b=s(9593);t.default=()=>{var e;let t=(0,a.useRef)(null),[s,j]=(0,a.useState)(new Date),[p,N]=(0,a.useState)({}),[y,w]=(0,a.useState)({}),{layoutConfig:S}=(0,a.useContext)(o.V),{isConnected:C,lastConnectionUpdate:E,sendMessageAndWaitForCondition:k}=(0,a.useContext)(d.WebsocketContext),[T,D]=(0,a.useState)(!1),[O,M]=(0,a.useState)([]),[I,A]=(0,a.useState)(new Date),[L,P]=(0,a.useState)(new Date),[R,F]=(0,a.useState)([]),V=(0,v.useRouter)(),[Z,W]=(0,a.useState)(1),[_,z]=(0,a.useState)(!1),[H,B]=(0,a.useState)(null),[J,G]=(0,a.useState)(!1),[U,X]=(0,a.useState)(!1),[Y,q]=(0,a.useState)([]),[,K]=(0,a.useState)(!1),[,Q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=setInterval(()=>{C&&k({type:"DEVICES-DATA"},e=>"DEVICES-DATA"===e.type).then(e=>{D(t=>{var s,n;return(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.xtablesConnectedStatus)!==t&&(A(new Date),K(t=>{if(t){var s;(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.xtablesConnectedStatus)?(0,b.On)():(0,b.rd)()}return!0})),null===(n=e.message)||void 0===n?void 0:n.xtablesConnectedStatus}),F(t=>{var s,n,r,l;return t.toString()!==(null==e?void 0:null===(n=e.message)||void 0===n?void 0:null===(s=n.logs)||void 0===s?void 0:s.toString())&&j(new Date),null!==(l=null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.logs)&&void 0!==l?l:[]}),M(t=>{var s,n;let r=JSON.parse(null!==(n=null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.devices)&&void 0!==n?n:[]);return(null==r?void 0:r.length)!==(null==t?void 0:t.length)&&(P(new Date),Q(e=>(e&&(0,b.s_)(),!0))),r})}).catch(()=>{})},100);return()=>clearInterval(e)},[C,k]);let $=()=>{w({plugins:{legend:{labels:{color:"#495057"}}},scales:{x:{ticks:{color:"#495057"},grid:{color:"#ebedef"}},y:{ticks:{color:"#495057"},grid:{color:"#ebedef"}}}})},ee=()=>{w({plugins:{legend:{labels:{color:"#ebedef"}}},scales:{x:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}},y:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}}}})};(0,a.useEffect)(()=>{"light"===S.colorScheme?$():ee()},[S.colorScheme]);let et=()=>{G(!0),z(!1),W(1),Y.forEach(e=>{clearTimeout(e)})},es=()=>{G(!1),W(1),z(!0)};(0,a.useEffect)(()=>{_&&en()},[Z,_]);let en=()=>{X(!0),B((0,h.Z)({message:"Requesting service #".concat(Z)})),k({type:"DEVICES-SEARCH",message:Z},e=>"DEVICES-SEARCH"===e.type,4e3).then(e=>{var t,s,r,l;let i=e.message;(null==i?void 0:i.exists)?B((0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)(f.E,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},alt:"XBOT ROBOTICS LOGO",src:"/images/logo/logo.png"})}),(0,n.jsx)("div",{className:"col-3",children:(0,n.jsx)("div",{className:"card mb-0",children:(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Machine Server"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl text-green-600",children:C&&null!==(t=null==i?void 0:i.server)&&void 0!==t?t:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]})})}),(0,n.jsx)("div",{className:"col-3",children:(0,n.jsx)("div",{className:"card mb-0",children:(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Hostname"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl text-green-600",children:C&&null!==(s=null==i?void 0:i.hostname)&&void 0!==s?s:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-address-book text-blue-500 text-xl"})})]})})}),(0,n.jsx)("div",{className:"col-3",children:(0,n.jsx)("div",{className:"card mb-0",children:(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"IP Address"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl text-green-600",children:C&&null!==(r=null==i?void 0:i.address)&&void 0!==r?r:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-map-marker text-blue-500 text-xl"})})]})})}),(0,n.jsx)("div",{className:"col-3",children:(0,n.jsx)("div",{className:"card mb-0",children:(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+((null==i?void 0:i.status)==="CONNECTED"?"text-green-600":(null==i?void 0:i.status)==="CONNECTING"?"text-yellow-500 animate-pulse-fast":"text-red-600 animate-pulse"),children:C&&null!==(l=null==i?void 0:i.status)&&void 0!==l?l:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]})})})]})):B((0,h.Z)({message:"Failed to find service #".concat(Z)}));let a=setTimeout(()=>{J||W(e=>e+1)},(null==i?void 0:i.exists)?5e3:2e3);q(e=>[...e,a]),X(!1)}).catch(e=>{let t=e.message||"An unexpected error occurred.";B((0,h.Z)({message:"Failed to find service #".concat(Z,". Reason: ").concat(t)}));let s=setTimeout(()=>{J||W(e=>e+1)},1e3);q(e=>[...e,s]),X(!1)})};return(0,n.jsxs)("div",{className:"grid fadeIn",children:[(0,n.jsx)(m.F,{ref:t}),(0,n.jsx)(g.V,{maximizable:!0,closable:!1,maximized:!0,header:"Machine Auto Discovery",visible:_,onHide:et,footer:(0,n.jsx)(r.z,{className:"w-full",label:"Stop",onClick:et}),children:H}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:C?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:E})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:C&&T?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:I})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Devices"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(e=null==O?void 0:O.length)&&void 0!==e?e:0})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-android text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:L})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Notifications"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:(null!=R?R:[]).length})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-comment text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:s})]})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)(i.w,{paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],paginatorLeft:()=>(0,n.jsx)(r.z,{icon:"pi pi-refresh",text:!0,loading:U,disabled:!C,onClick:es}),removableSort:!0,value:C?O:[],emptyMessage:(0,h.Z)({message:C?"Searching for machines running XCASTER":"Connecting to backend"}),rows:5,paginator:!0,children:[(0,n.jsx)(l.s,{frozen:!0,field:"hostname",header:"Hostname",sortable:!0,style:{width:"25%"},body:e=>(0,n.jsx)("span",{className:"text-lg",children:e.hostname})}),(0,n.jsx)(l.s,{field:"server",header:"Server",style:{width:"25%"}}),(0,n.jsx)(l.s,{field:"address",header:"Address",style:{width:"25%"}}),(0,n.jsx)(l.s,{style:{width:"25%"},header:"Status",body:e=>(0,n.jsx)("div",{children:(0,n.jsx)(c.V,{className:(null==e?void 0:e.status)==="CONNECTING"?"animate-pulse-fast":(null==e?void 0:e.status)==="DISCONNECTED"?"animate-pulse":"",severity:e.connected?"success":(null==e?void 0:e.status)==="CONNECTED"?"success":(null==e?void 0:e.status)==="CONNECTING"?"warning":"danger",value:e.connected?"Connected":(null==e?void 0:e.status)==="CONNECTED"?"Connected":(null==e?void 0:e.status)==="CONNECTING"?"Connecting":"Disconnected",rounded:!0})})}),(0,n.jsx)(l.s,{header:"View",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.z,{loading:p[null==e?void 0:e.server],disabled:!C||(null==e?void 0:e.status)!=="CONNECTED",icon:"pi pi-search",text:!0,onClick:()=>{let s=null==e?void 0:e.server;if(!s){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}N(e=>({...e,[s]:!0})),t.current.show({severity:"info",summary:"Redirecting...",detail:"You are being redirected to the machine control panel..."}),V.replace("/device/files?server="+s+"&directory=/")}})})}),(0,n.jsx)(l.s,{header:"Services",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.z,{loading:p[null==e?void 0:e.server],disabled:!C||(null==e?void 0:e.status)!=="CONNECTED",icon:"pi pi-server",text:!0,onClick:()=>{let s=null==e?void 0:e.server;if(!s){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}N(e=>({...e,[s]:!0})),t.current.show({severity:"info",summary:"Redirecting...",detail:"You are being redirected to the machine control panel..."}),V.replace("/device/services?server="+s)}})})}),(0,n.jsx)(l.s,{header:"Control",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.z,{loading:p[null==e?void 0:e.server],disabled:!C||(null==e?void 0:e.status)!=="CONNECTED",icon:"pi pi-desktop",text:!0,onClick:()=>{let s=null==e?void 0:e.server;if(!s){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}N(e=>({...e,[s]:!0})),t.current.show({severity:"info",summary:"Redirecting...",detail:"You are being redirected to the machine control panel..."}),V.replace("/device?server="+s)}})})}),(0,n.jsx)(l.s,{header:"Reboot",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.z,{loading:p[null==e?void 0:e.server],disabled:!C||(null==e?void 0:e.status)!=="CONNECTED",className:"text-red-500",icon:"pi pi-sync",text:!0,onClick:()=>{if(C){let s=null==e?void 0:e.server;if(!s){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}N(e=>({...e,[s]:!0})),k({type:"DEVICE-REBOOT",message:s},e=>"DEVICE-REBOOT"===e.type,5e3).then(e=>{t.current.show({severity:"success",summary:"Server Rebooting!",detail:"The command was sent to the machine."}),N(e=>({...e,[s]:!1}))}).catch(()=>{t.current.show({severity:"error",summary:"Server Unresponsive!",detail:"The server did not respond in time."}),N(e=>({...e,[s]:!1}))})}}})})})]})})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"40rem"},children:C&&(null!=R?R:[]).length>0?R.map((e,t)=>(0,n.jsx)(x.Z,{log:e},t)):(0,h.Z)({message:C?(null!=R?R:[]).length>0?"Loading resources":"There are no logs recorded":"Connecting to backend"})})})})]})}},7389:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(9268),r=s(6006);let l=e=>{let t=new Date-new Date(e),s=Math.floor(t/1e3),n=Math.floor(s/31536e3);return n>1?"".concat(n," years ago"):(n=Math.floor(s/2592e3))>1?"".concat(n," months ago"):(n=Math.floor(s/86400))>1?"".concat(n," days ago"):(n=Math.floor(s/3600))>1?"".concat(n," hours ago"):(n=Math.floor(s/60))>1?"".concat(n," minutes ago"):s>=1?"".concat(s," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var i=e=>{let{date:t,className:s}=e,[i,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{a(l(t));let e=setInterval(()=>{a(l(t))},100);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{className:s,children:i})}},2469:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(9268),r=s(7690),l=s(6006),i=s(9497),a=s.n(i);let o=e=>{let{delay:t=500}=e,[s,r]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=setInterval(()=>{r(e=>{switch(e){case"":return".";case".":return"..";case"..":return"...";default:return""}})},t);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{children:s})};o.propTypes={delay:a().number};let c=e=>{let{message:t,speed:s="normal",dotSpeed:l=400,...i}=e;return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)(r.E,{...i,className:"fast"===s?"animate-pulse-fast":"animate-pulse",alt:"XBOT ROBOTICS LOGO",src:"/images/logo/logo.png"}),t&&(0,n.jsxs)("p",{className:"font-bold",children:[null!=t?t:"Loading",(0,n.jsx)(o,{delay:l})]})]})};c.propType={message:a().number};var d=c},8671:function(e,t,s){"use strict";s.d(t,{V:function(){return l},a:function(){return i}});var n=s(9268),r=s(6006);let l=(0,r.createContext)({}),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)({inputStyle:"outlined",menuMode:"static",colorScheme:"dark",theme:"lara-dark-indigo",scale:14}),[a,o]=(0,r.useState)({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1}),c=()=>"overlay"===s.menuMode,d=()=>window.innerWidth>991;return(0,n.jsx)(l.Provider,{value:{layoutConfig:s,setLayoutConfig:i,layoutState:a,setLayoutState:o,onMenuToggle:()=>{c()&&o(e=>({...e,overlayMenuActive:!e.overlayMenuActive})),d()?o(e=>({...e,staticMenuDesktopInactive:!e.staticMenuDesktopInactive})):o(e=>({...e,staticMenuMobileActive:!e.staticMenuMobileActive}))},showProfileSidebar:()=>{o(e=>({...e,profileSidebarVisible:!e.profileSidebarVisible}))}},children:t})}},7537:function(e,t,s){"use strict";s.r(t),s.d(t,{WebSocketProvider:function(){return i},WebsocketContext:function(){return l}});var n=s(9268),r=s(6006);let l=(0,r.createContext)({}),i=e=>{let{children:t,url:s}=e,[i,a]=(0,r.useState)(!1),[o,c]=(0,r.useState)(new Date),d=(0,r.useRef)(null);return(0,r.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(s),d.current.onopen=()=>{a(!0)},d.current.onclose=()=>(a(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),a(!1)}})(),()=>{d.current&&d.current.close()}),[s]),(0,r.useEffect)(()=>{c(new Date)},[i]),(0,n.jsx)(l.Provider,{value:{isConnected:i,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return i?(d.current.send(JSON.stringify(e)),new Promise((e,n)=>{let r=s=>{let n=JSON.parse(s.data);if(t(n)){d.current.removeEventListener("message",r),clearTimeout(l);let t=n.message;n.message=JSON.parse(t),e(n)}},l=setTimeout(()=>{d.current.removeEventListener("message",r),n(Error("Timeout: Condition not met within ".concat(s," ms")))},s);d.current.addEventListener("message",r)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!i)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let s=e=>{let n=JSON.parse(e.data);t(n)&&d.current.removeEventListener("message",s)};d.current.addEventListener("message",s)},listenTillCondition:e=>i?new Promise(t=>{let s=n=>{let r=JSON.parse(n.data);e(r)&&(d.current.removeEventListener("message",s),t(r))};d.current.addEventListener("message",s)}):Promise.reject(Error("WebSocket is not connected")),socket:d,sendMessage:e=>{if(!i)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},2723:function(e,t,s){"use strict";var n=s(9268);s(6006);var r=s(2153),l=s.n(r);let i=new(l())({fg:"#FFF",bg:"#000",newline:!0,escapeXML:!1,stream:!1}),a=e=>{var t,s;return i.toHtml(null!==(s=null==e?void 0:null===(t=e.replace("\x1b[?2004h","\x1b[92m"))||void 0===t?void 0:t.replace("\x1b[?2004l",""))&&void 0!==s?s:"")};t.Z=e=>{let{log:t}=e,s=a(t);return(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:s}})}},9593:function(e,t,s){"use strict";s.d(t,{On:function(){return l},rd:function(){return r},s_:function(){return n}});let n=()=>{let e=new Audio("/audio/ding.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})},r=()=>{let e=new Audio("/audio/error.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})},l=()=>{let e=new Audio("/audio/success.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})}}},function(e){e.O(0,[8123,434,6878,6789,8285,9933,845,2087,7136,9217,4046,769,4074,3210,9253,5769,1744],function(){return e(e.s=9386)}),_N_E=e.O()}]);
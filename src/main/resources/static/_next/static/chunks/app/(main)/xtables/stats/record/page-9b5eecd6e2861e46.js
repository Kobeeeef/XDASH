(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5481],{7961:function(e,l,t){Promise.resolve().then(t.bind(t,1035))},1035:function(e,l,t){"use strict";t.r(l);var s=t(9268),a=t(6006),n=t(8671),i=t(7490),d=t(3702),r=t(439),c=t(3621),o=t(7537),u=t(7389),v=t(845),m=t(4046),h=t(4390),x=t(315),p=t(5942),j=t(6595),f=t(8176),b=t(8298),y=t(2059),g=t(9593);l.default=()=>{var e,l,t,N,S,C,k,w,A;let E=(0,a.useRef)(),[T,D]=(0,a.useState)({}),[O,L]=(0,a.useState)(!1),{isConnected:R,lastConnectionUpdate:z,sendMessageAndWaitForCondition:B}=(0,a.useContext)(o.U),[P,V]=(0,a.useState)(!1),[I,Z]=(0,a.useState)(new Date),[_,F]=(0,a.useState)({}),[X,K]=(0,a.useState)({name:"Line Chart",type:"line"}),{layoutConfig:H}=(0,a.useContext)(n.V),J=(0,a.useRef)(null),[U,q]=(0,a.useState)(1e3),[G,M]=(0,a.useState)(!1),[Q,W]=(0,a.useState)([]),Y=getComputedStyle(document.documentElement),[$,ee]=(0,a.useState)(null),[el,et]=(0,a.useState)(""),[es,ea]=(0,a.useState)();(0,a.useEffect)(()=>{let e=setInterval(()=>{R&&B({type:"XTABLES-DATA"},e=>"XTABLES-DATA"===e.type).then(e=>{if(V(l=>{var t,s,a,n;return(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.connected)!==l&&(Z(new Date),e.message.connected?(0,g.On)():(0,g.rd)()),(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)||M(!1),null!==(n=null==e?void 0:null===(a=e.message)||void 0===a?void 0:a.connected)&&void 0!==n&&n}),G){let l=new Date().toISOString(),t=function(e){let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{let[s,a]=e,n={key:t?"".concat(t,".").concat(s):s,name:s};return"object"==typeof a&&null!==a?(a.hasOwnProperty("value")&&(n.value=a.value,n.type=(typeof JSON.parse(a.value)).toString()),a.data&&(n.data=l(a.data,n.key))):(n.value=a,n.type=(typeof JSON.parse(a)).toString()),n})};return l(e)}(JSON.parse(e.message.json))||[],s=(e,l)=>{for(let t of e){if(t.key===l)return t;if(t.data){let e=s(t.data,l);if(e)return e}}return null};ea(e=>{let a={time:l};return Q.forEach(e=>{let l=s(t,e);l&&(a[l.key]=null==l?void 0:l.value)}),[a,...e||[]]}),F(e=>{var a,n;let i=!1,d=((null===(a=e.lineData)||void 0===a?void 0:a.datasets)||[]).map(e=>({...e})),r=[...(null===(n=e.lineData)||void 0===n?void 0:n.labels)||[]];return(Q.forEach(e=>{let l=d.find(l=>l.label===e),a=s(t,e),n=null==a?void 0:a.value;a&&(l||(l={label:e,data:[],fill:!1,tension:.4},d.push(l)),l.data=[...l.data||[],n],i=!0)}),i)?(r.push(l),{lineData:{labels:r,datasets:d}}):e})}}).catch(()=>{})},U),l=setInterval(()=>{R&&B({type:"XTABLES-STATUS"},e=>"XTABLES-STATUS"===e.type).then(e=>{V(l=>{var t,s,a;return(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.connected)!==l&&Z(new Date),null!==(a=null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)&&void 0!==a&&a})}).catch(()=>{})},500);return()=>{clearInterval(e),clearInterval(l)}},[R,B,U,G]),(0,a.useEffect)(()=>{let e=Y.getPropertyValue("--text-color")||"#495057",l=Y.getPropertyValue("--text-color-secondary")||"#6c757d",t=Y.getPropertyValue("--surface-border")||"#dfe7ef";D({lineOptions:{plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:l},grid:{color:t},border:{display:!1}},y:{ticks:{color:l},grid:{color:t},border:{display:!1}}}}})},[H]);let en=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:()=>{L(!1),et(null)}}),(0,s.jsx)(d.z,{disabled:null!==(0,j.Z)(el),label:"Save",icon:"pi pi-check",onClick:()=>{L(!1),W(e=>(e.push(el),e)),et(null)}})]});return(0,s.jsxs)("div",{className:"grid p-fluid fadeIn",children:[(0,s.jsx)(m.F,{ref:J}),(0,s.jsx)(h.V,{style:{width:"450px"},visible:O,header:"Key Details",modal:!0,className:"p-fluid",footer:en,onHide:()=>{L(!1),et(null)},children:(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"key",children:"Key Name"}),(0,s.jsx)(x.o,{id:"key",value:el,onChange:e=>{et(e.target.value)},required:!0,autoFocus:!0,className:(0,p.AK)({"p-invalid":null!==(0,j.Z)(el)})}),null===(0,j.Z)(el)?null:(0,s.jsx)("small",{className:"p-invalid",children:(0,j.Z)(el)})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,s.jsxs)("div",{className:"text-900 font-medium text-xl "+(R?"text-green-600":"text-red-600 animate-pulse"),children:[" ",R?"Connected":"Disconnected"]})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:z})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,s.jsx)("div",{className:"text-900 font-medium text-xl "+(R&&P?"text-green-600":"text-red-600 animate-pulse"),children:R&&P?"Connected":"Disconnected"})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:I})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Intervals Recorded"}),(0,s.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(t=null==es?void 0:es.length)&&void 0!==t?t:0})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-database text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:I})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)("div",{className:"col-12 lg:col-3",children:(0,s.jsx)(d.z,{disabled:G||!R||!P,label:"Add",icon:"pi pi-plus",onClick:()=>{L(!0)}})}),(0,s.jsx)("div",{className:"col-12 md:col-3",children:(0,s.jsxs)("div",{className:"p-inputgroup",children:[(0,s.jsx)(d.z,{onClick:()=>{W(e=>{let l=e.indexOf($);return -1===l?(J.current.show({severity:"error",summary:"Failure",detail:"The key was not found."}),e):(e.splice(l,1).length>0?(ee(null),J.current.show({severity:"success",summary:"Success",detail:"The key was removed."})):J.current.show({severity:"error",summary:"Failure",detail:"The key could not be removed."}),e)}),ee(null)},disabled:G||!R||!P||!(null==Q?void 0:Q.length),severity:"danger",label:"Remove"}),(0,s.jsx)(v.L,{disabled:G||!R||!P||!(null==Q?void 0:Q.length),value:$,onChange:e=>{ee(e.value)},options:Q,placeholder:"Delete Key"})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,s.jsx)(r.R,{disabled:G||!R||!P,value:U,onValueChange:e=>q(null!==(N=e.value)&&void 0!==N?N:100),suffix:" millisecond".concat(U>1?"s":""," per record")})}),(0,s.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,s.jsx)(v.L,{disabled:G||!R||!P,value:X,onChange:e=>{K(e.value)},options:[{name:"Line Chart",type:"line"},{name:"Bar Chart",type:"bar"},{name:"Radar Chart",type:"radar"},{name:"Polar Area",type:"polarArea"},{name:"Pie Chart",type:"pie"},{name:"Doughnut Chart",type:"doughnut"}],optionLabel:"name",placeholder:"Select Chart"})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(d.z,{disabled:!R||!P||G||!(null==_?void 0:null===(l=_.lineData)||void 0===l?void 0:null===(e=l.labels)||void 0===e?void 0:e.length)&&!(null===(S=null==es?void 0:es.length)||void 0===S||S)&&!(null===(C=null==Q?void 0:Q.length)||void 0===C||C),label:"Reset",severity:"danger",onClick:()=>{F({}),ea([]),W([]),J.current.show({severity:"success",summary:"Success",detail:"All settings and charts reset."})}})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(c.C,{disabled:!R||!P||!(null==Q?void 0:Q.length),onLabel:"Stop Recording",offLabel:"Start Recording",checked:G,onChange:e=>M(e.value)})})]})})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)(i.k,{type:null!==(k=null==X?void 0:X.type)&&void 0!==k?k:"line",data:_.lineData,options:T.lineOptions})})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(d.z,{disabled:(null!==(w=null==es?void 0:es.length)&&void 0!==w?w:0)===0,label:"Export CSV",icon:"pi pi-file",onClick:()=>{E.current.exportCSV({selectionOnly:!1})}})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(d.z,{disabled:(null!==(A=null==es?void 0:es.length)&&void 0!==A?A:0)===0,severity:"success",label:"Export Excel",icon:"pi pi-file-excel",onClick:()=>{(0,y.r)("XTABLES-GRAPHS",es)}})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)(f.w,{scrollable:!0,virtualScrollerOptions:{itemSize:15},scrollHeight:"500px",ref:E,emptyMessage:"There is no data recorded.",value:es,children:[(0,s.jsx)(b.s,{field:"time",header:"Time"}),Q.map((e,l)=>(0,s.jsx)(b.s,{field:e,header:e},l))]})})]})})})]})}},9593:function(e,l,t){"use strict";t.d(l,{On:function(){return n},rd:function(){return a},s_:function(){return s}});let s=()=>{let e=new Audio("/audio/ding.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})},a=()=>{let e=new Audio("/audio/error.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})},n=()=>{let e=new Audio("/audio/success.mp3");e.play().catch(e=>{console.error("Audio play was prevented:",e)})}}},function(e){e.O(0,[8123,5087,434,6878,6789,8285,9933,845,439,9217,7003,4046,6454,7441,9253,5769,1744],function(){return e(e.s=7961)}),_N_E=e.O()}]);
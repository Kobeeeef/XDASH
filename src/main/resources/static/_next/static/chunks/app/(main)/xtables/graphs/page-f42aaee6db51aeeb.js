(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9971],{109:function(e,l,t){Promise.resolve().then(t.bind(t,3449))},3449:function(e,l,t){"use strict";t.r(l);var s=t(9268),n=t(6006),a=t(8671),i=t(7490),r=t(3702),c=t(439),d=t(3621),o=t(7537),u=t(7389),m=t(845),v=t(4046),h=t(4390),x=t(315),p=t(5942),f=t(6595),j=t(8176),y=t(8298),g=t(2059),b=t(2469);l.default=()=>{var e,l,t,N,S,C,k,T,O;let E=(0,n.useRef)(),[w,A]=(0,n.useState)({}),[D,L]=(0,n.useState)(!1),{isConnected:R,lastConnectionUpdate:I,sendMessageAndWaitForCondition:_}=(0,n.useContext)(o.U),[P,B]=(0,n.useState)(!1),[V,Z]=(0,n.useState)(new Date),[z,X]=(0,n.useState)({}),[F,U]=(0,n.useState)({name:"Line Chart",type:"line"}),{layoutConfig:H}=(0,n.useContext)(a.V),K=(0,n.useRef)(null),[J,W]=(0,n.useState)(1e3),[q,G]=(0,n.useState)(!1),[M,Y]=(0,n.useState)([]),Q=getComputedStyle(document.documentElement),[$,ee]=(0,n.useState)(null),[el,et]=(0,n.useState)(""),[es,en]=(0,n.useState)();(0,n.useEffect)(()=>{let e=setInterval(()=>{R&&_({type:"XTABLES-DATA"},e=>"XTABLES-DATA"===e.type).then(e=>{if(B(l=>{var t,s,n,a;return(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.connected)!==l&&Z(new Date),(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)||G(!1),null!==(a=null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.connected)&&void 0!==a&&a}),q){let l=new Date().toISOString(),t=function(e){let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{let[s,n]=e,a={key:t?"".concat(t,".").concat(s):s,name:s};return"object"==typeof n&&null!==n?(n.hasOwnProperty("value")&&(a.value=n.value,a.type=(typeof JSON.parse(n.value)).toString()),n.data&&(a.data=l(n.data,a.key))):(a.value=n,a.type=(typeof JSON.parse(n)).toString()),a})};return l(e)}(JSON.parse(e.message.json))||[],s=(e,l)=>{for(let t of e){if(t.key===l)return t;if(t.data){let e=s(t.data,l);if(e)return e}}return null};en(e=>{let n={time:l};return M.forEach(e=>{let l=s(t,e);l&&(n[l.key]=null==l?void 0:l.value)}),[n,...e||[]]}),X(e=>{var n,a;let i=!1,r=((null===(n=e.lineData)||void 0===n?void 0:n.datasets)||[]).map(e=>({...e})),c=[...(null===(a=e.lineData)||void 0===a?void 0:a.labels)||[]];return(M.forEach(e=>{let l=r.find(l=>l.label===e),n=s(t,e),a=null==n?void 0:n.value;n&&(l||(l={label:e,data:[],fill:!1,tension:.4},r.push(l)),l.data=[...l.data||[],a],i=!0)}),i)?(c.push(l),{lineData:{labels:c,datasets:r}}):e})}}).catch(()=>{})},J),l=setInterval(()=>{R&&_({type:"XTABLES-STATUS"},e=>"XTABLES-STATUS"===e.type).then(e=>{B(l=>{var t,s,n;return(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.connected)!==l&&Z(new Date),null!==(n=null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)&&void 0!==n&&n})}).catch(()=>{})},500);return()=>{clearInterval(e),clearInterval(l)}},[R,_,J,q]),(0,n.useEffect)(()=>{let e=Q.getPropertyValue("--text-color")||"#495057",l=Q.getPropertyValue("--text-color-secondary")||"#6c757d",t=Q.getPropertyValue("--surface-border")||"#dfe7ef";A({lineOptions:{plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:l},grid:{color:t},border:{display:!1}},y:{ticks:{color:l},grid:{color:t},border:{display:!1}}}}})},[H]);let ea=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:()=>{L(!1),et(null)}}),(0,s.jsx)(r.z,{disabled:null!==(0,f.Z)(el),label:"Save",icon:"pi pi-check",onClick:()=>{L(!1),Y(e=>(e.push(el),e)),et(null)}})]});return(0,s.jsxs)("div",{className:"grid p-fluid fadeIn",children:[(0,s.jsx)(v.F,{ref:K}),(0,s.jsx)(h.V,{style:{width:"450px"},visible:D,header:"Key Details",modal:!0,className:"p-fluid",footer:ea,onHide:()=>{L(!1),et(null)},children:(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"key",children:"Key Name"}),(0,s.jsx)(x.o,{id:"key",value:el,onChange:e=>{et(e.target.value)},required:!0,autoFocus:!0,className:(0,p.AK)({"p-invalid":null!==(0,f.Z)(el)})}),null===(0,f.Z)(el)?null:(0,s.jsx)("small",{className:"p-invalid",children:(0,f.Z)(el)})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,s.jsxs)("div",{className:"text-900 font-medium text-xl "+(R?"text-green-600":"text-red-600 animate-pulse"),children:[" ",R?"Connected":"Disconnected"]})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:I})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,s.jsx)("div",{className:"text-900 font-medium text-xl "+(R&&P?"text-green-600":"text-red-600 animate-pulse"),children:R&&P?"Connected":"Disconnected"})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:V})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,s.jsxs)("div",{className:"card mb-0",children:[(0,s.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Intervals Recorded"}),(0,s.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(t=null==es?void 0:es.length)&&void 0!==t?t:0})]}),(0,s.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,s.jsx)("i",{className:"pi pi-database text-blue-500 text-xl"})})]}),(0,s.jsx)(u.Z,{date:V})]})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)("div",{className:"col-12 lg:col-3",children:(0,s.jsx)(r.z,{disabled:q||!R||!P,label:"Add",icon:"pi pi-plus",onClick:()=>{L(!0)}})}),(0,s.jsx)("div",{className:"col-12 md:col-3",children:(0,s.jsxs)("div",{className:"p-inputgroup",children:[(0,s.jsx)(r.z,{onClick:()=>{Y(e=>{let l=e.indexOf($);return -1===l?(K.current.show({severity:"error",summary:"Failure",detail:"The key was not found."}),e):(e.splice(l,1).length>0?(ee(null),K.current.show({severity:"success",summary:"Success",detail:"The key was removed."})):K.current.show({severity:"error",summary:"Failure",detail:"The key could not be removed."}),e)}),ee(null)},disabled:q||!R||!P||!(null==M?void 0:M.length),severity:"danger",label:"Remove"}),(0,s.jsx)(m.L,{disabled:q||!R||!P||!(null==M?void 0:M.length),value:$,onChange:e=>{ee(e.value)},options:M,placeholder:"Delete Key"})]})}),(0,s.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,s.jsx)(c.R,{disabled:q||!R||!P,value:J,onValueChange:e=>W(null!==(N=e.value)&&void 0!==N?N:100),suffix:" millisecond".concat(J>1?"s":""," per record")})}),(0,s.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,s.jsx)(m.L,{disabled:q||!R||!P,value:F,onChange:e=>{U(e.value)},options:[{name:"Line Chart",type:"line"},{name:"Bar Chart",type:"bar"},{name:"Radar Chart",type:"radar"},{name:"Polar Area",type:"polarArea"},{name:"Pie Chart",type:"pie"},{name:"Doughnut Chart",type:"doughnut"}],optionLabel:"name",placeholder:"Select Chart"})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(r.z,{disabled:!R||!P||q||!(null==z?void 0:null===(l=z.lineData)||void 0===l?void 0:null===(e=l.labels)||void 0===e?void 0:e.length)&&!(null===(S=null==es?void 0:es.length)||void 0===S||S)&&!(null===(C=null==M?void 0:M.length)||void 0===C||C),label:"Reset",severity:"danger",onClick:()=>{X({}),en([]),Y([]),K.current.show({severity:"success",summary:"Success",detail:"All settings and charts reset."})}})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(d.C,{disabled:!R||!P||!(null==M?void 0:M.length),onLabel:"Stop Recording",offLabel:"Start Recording",checked:q,onChange:e=>G(e.value)})})]})})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)(i.k,{type:null!==(k=null==F?void 0:F.type)&&void 0!==k?k:"line",data:z.lineData,options:w.lineOptions})})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"grid",children:[(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(r.z,{disabled:(null!==(T=null==es?void 0:es.length)&&void 0!==T?T:0)===0,label:"Export CSV",icon:"pi pi-file",onClick:()=>{E.current.exportCSV({selectionOnly:!1})}})}),(0,s.jsx)("div",{className:"col-6",children:(0,s.jsx)(r.z,{disabled:(null!==(O=null==es?void 0:es.length)&&void 0!==O?O:0)===0,severity:"success",label:"Export Excel",icon:"pi pi-file-excel",onClick:()=>{(0,g.r)("XTABLES-GRAPHS",es)}})}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)(j.w,{scrollable:!0,virtualScrollerOptions:{itemSize:15},scrollHeight:"500px",ref:E,emptyMessage:(0,b.Z)({message:R?P?"There is no data recorded":"Connecting to XTABLES":"Connecting to backend"}),value:R&&P?es:[],children:[R&&P&&(null!=es?es:[]).length>0&&(0,s.jsx)(y.s,{field:"time",header:"Time"}),(null!=es?es:[]).length>0&&M.map((e,l)=>(0,s.jsx)(y.s,{field:e,header:e},l))]})})]})})})]})}},2469:function(e,l,t){"use strict";t.d(l,{Z:function(){return o}});var s=t(9268),n=t(7690),a=t(6006),i=t(9497),r=t.n(i);let c=e=>{let{delay:l=500}=e,[t,n]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=setInterval(()=>{n(e=>{switch(e){case"":return".";case".":return"..";case"..":return"...";default:return""}})},l);return()=>clearInterval(e)},[l]),(0,s.jsx)("span",{children:t})};c.propTypes={delay:r().number};let d=e=>{let{message:l,speed:t="normal",dotSpeed:a=400,...i}=e;return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,s.jsx)(n.E,{...i,className:"fast"===t?"animate-pulse-fast":"animate-pulse",alt:"XBOT ROBOTICS LOGO",src:"/images/logo/logo.png"}),l&&(0,s.jsxs)("p",{className:"font-bold",children:[null!=l?l:"Loading",(0,s.jsx)(c,{delay:a})]})]})};d.propType={message:r().number};var o=d},7611:function(e,l,t){"use strict";var s=t(6054);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,l,t,n,a,i){if(i!==s){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function l(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:l,element:e,elementType:e,instanceOf:l,node:e,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:a,resetWarningCache:n};return t.PropTypes=t,t}},9497:function(e,l,t){e.exports=t(7611)()},6054:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[8123,5087,434,6878,6789,8285,9933,845,439,9217,7003,4046,769,6454,7441,9253,5769,1744],function(){return e(e.s=109)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9467],{3838:function(e,t,n){Promise.resolve().then(n.bind(n,7208))},7208:function(e,t,n){"use strict";n.r(t);var r=n(9268),s=n(6006),a=n(7537),i=n(7389),l=n(3429),o=n(8176),c=n(8298),u=n(4046),d=n(6008),m=n(4390),p=n(3702),f=n(2469);t.default=()=>{var e,t,n,v;let h=(0,s.useRef)(null),x=(0,d.useSearchParams)(),g=x.get("server"),[y,b]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[E,w]=(0,s.useState)(!1),{isConnected:S,lastConnectionUpdate:C,sendMessageAndWaitForCondition:O}=(0,s.useContext)(a.U),[T,P]=(0,s.useState)(new Date),[D,k]=(0,s.useState)({}),[I,R]=(0,s.useState)(!1),[L,M]=(0,s.useState)([]);function A(){if(S){let e=new Date;N(!0),M([]),O({type:"DEVICE-SERVICES-DATA",message:y},e=>"DEVICE-SERVICES-DATA"===e.type).then(t=>{let n=new Date,r=JSON.parse(t.message.services);M(r),setTimeout(()=>{N(!1)},Math.max(2e3-(n-e),0))}).catch(e=>{h.current.show({severity:"error",summary:"Failed to reload",detail:e}),N(!1)})}}return(0,s.useEffect)(()=>{b(g)},[g]),(0,s.useEffect)(()=>{let e=setInterval(()=>{S&&O({type:"DEVICE-DATA",message:y},e=>"DEVICE-DATA"===e.type).then(e=>{var t;(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.exists)?(k(e.message),R(!1)):(R(!0),k({}))}).catch(()=>{})},250);return()=>clearInterval(e)},[S,y]),(0,r.jsxs)("div",{className:"grid fadeIn",children:[(0,r.jsx)(u.F,{ref:h}),(0,r.jsx)(m.V,{header:"Machine Discovery Failed",modal:!1,visible:I,position:"top-right",style:{width:"50vw"},onHide:()=>{I&&R(!1)},closable:!1,draggable:!0,resizable:!1,children:(0,r.jsxs)("p",{className:"m-0",children:["The machine with the server name ",(0,r.jsx)("strong",{children:y})," was not found on the network running XCASTER. Please check your network connection, verify the machine is on and try again later."]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl "+(S?"text-green-600":"text-red-600 animate-pulse"),children:S?"Connected":"Disconnected"})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,r.jsx)(i.Z,{date:C})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Machine Server"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl "+(S&&y?(null==D?void 0:D.status)==="CONNECTED"?"text-green-600":(null==D?void 0:D.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:S?null!=y?y:"Unknown":"Disconnected"})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-desktop text-blue-500 text-xl"})})]}),(0,r.jsx)(i.Z,{date:T})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Hostname"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl "+(S&&y&&(null==D?void 0:D.hostname)?(null==D?void 0:D.status)==="CONNECTED"?"text-green-600":(null==D?void 0:D.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:S&&null!==(e=null==D?void 0:D.hostname)&&void 0!==e?e:"Unknown"})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-address-book text-blue-500 text-xl"})})]}),(0,r.jsx)(i.Z,{date:T})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"IP Address"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl "+(S&&y&&(null==D?void 0:D.address)?(null==D?void 0:D.status)==="CONNECTED"?"text-green-600":(null==D?void 0:D.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:S&&null!==(t=null==D?void 0:D.address)&&void 0!==t?t:"Unknown"})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-map-marker text-blue-500 text-xl"})})]}),(0,r.jsx)(i.Z,{date:T})]})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"card mb-0",children:(0,r.jsxs)(o.w,{showGridlines:!1,emptyMessage:(0,f.Z)({message:j&&(null!=L?L:[]).length>0?"Loading resources":j?"Requesting resources":S?(null==D?void 0:D.exists)?(null==D?void 0:D.status)!=="CONNECTED"?"Connecting to machine":"No resources found":"Machine not running XCASTER":"Connecting to backend",speed:(null==D?void 0:D.status)==="CONNECTING"?"fast":"normal"}),value:!j&&0!==(null!=L?L:[]).length&&S&&(null==D?void 0:D.status)==="CONNECTED"&&(null==D?void 0:D.exists)?L:[],paginator:!0,rows:5,rowsPerPageOptions:[5,10,25,50,75],tableStyle:{minWidth:"50rem"},paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",paginatorLeft:()=>(0,r.jsx)(p.z,{disabled:!S||(null==D?void 0:D.status)!=="CONNECTED",loading:j||E,type:"button",icon:"pi pi-refresh",text:!0,onClick:A}),children:[(0,r.jsx)(c.s,{filter:!0,field:"id",frozen:!0,header:"Name",style:{width:"16%"}},"id"),(0,r.jsx)(c.s,{filter:!0,field:"execMainPID",header:"PID",style:{width:"16%"}},"execMainPID"),(0,r.jsx)(c.s,{filter:!0,body:e=>(0,r.jsx)(l.V,{severity:(null==e?void 0:e.activeState)==="active"?"success":(null==e?void 0:e.activeState)==="inactive"?"danger":(null==e?void 0:e.status)==="activating"||(null==e?void 0:e.activeState)==="reloading"||(null==e?void 0:e.activeState)==="maintenance"?"warning":"danger",value:null!==(n=null==e?void 0:e.activeState)&&void 0!==n?n:"Unknown",rounded:!0}),header:"Status",style:{width:"16%"}},"status"),(0,r.jsx)(c.s,{body:e=>(0,r.jsx)("span",{children:(null==e?void 0:e.memoryCurrent)===0?"Unknown":null!==(v=null==e?void 0:e.memoryCurrent)&&void 0!==v?v:"Unknown"}),header:"Memory",style:{width:"16%"}},"memory"),(0,r.jsx)(c.s,{field:"cpuUsageNSec",header:"CPU",style:{width:"16%"}},"cpu"),(0,r.jsx)(c.s,{field:"execMainStartTimestamp",header:"Timestamp",style:{width:"16%"}},"timestamp"),(0,r.jsx)(c.s,{header:"Restart",body:e=>(0,r.jsx)(p.z,{className:"text-red-500",loading:j||E,disabled:!S||"active"!==e.activeState||(null==D?void 0:D.status)!=="CONNECTED",icon:"pi pi-sync",text:!0,onClick:()=>(function(e){if(!y){h.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}if(!e){h.current.show({severity:"error",summary:"Service Not Found!",detail:"The service was not found."});return}w(!0),O({type:"DEVICE-SERVICE-RESTART",message:JSON.stringify({server:y,serviceID:e})},e=>"DEVICE-SERVICE-RESTART"===e.type,1e4).then(e=>{w(!1),h.current.show({severity:"success",summary:"Service Daemon Restarted!",detail:"The service has been restarted."}),A()}).catch(e=>{let t=e.message||"An unexpected error occurred.";h.current.show({severity:"error",summary:"Failed to restart",detail:t}),w(!1),A()})})(e.id)})},"restart")]})})})]})}},7389:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9268),s=n(6006);let a=e=>{let t=new Date-new Date(e),n=Math.floor(t/1e3),r=Math.floor(n/31536e3);return r>1?"".concat(r," years ago"):(r=Math.floor(n/2592e3))>1?"".concat(r," months ago"):(r=Math.floor(n/86400))>1?"".concat(r," days ago"):(r=Math.floor(n/3600))>1?"".concat(r," hours ago"):(r=Math.floor(n/60))>1?"".concat(r," minutes ago"):n>=1?"".concat(n," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var i=e=>{let{date:t,className:n,refresh:i=100}=e,[l,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{o(a(t));let e=setInterval(()=>{o(a(t))},i);return()=>clearInterval(e)},[t,i]),(0,r.jsx)("span",{className:n,children:l})}},2469:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(9268),s=n(7690),a=n(6006),i=n(9497),l=n.n(i);let o=e=>{let{delay:t=500}=e,[n,s]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=setInterval(()=>{s(e=>{switch(e){case"":return".";case".":return"..";case"..":return"...";default:return""}})},t);return()=>clearInterval(e)},[t]),(0,r.jsx)("span",{children:n})};o.propTypes={delay:l().number};let c=e=>{let{message:t,speed:n="normal",dotSpeed:a=400,...i}=e;return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,r.jsx)(s.E,{...i,className:"fast"===n?"animate-pulse-fast":"animate-pulse",alt:"XBOT ROBOTICS LOGO",src:"/images/logo/logo.png"}),t&&(0,r.jsxs)("p",{className:"font-bold",children:[null!=t?t:"Loading",(0,r.jsx)(o,{delay:a})]})]})};c.propType={message:l().number};var u=c},7537:function(e,t,n){"use strict";n.d(t,{U:function(){return a},q:function(){return i}});var r=n(9268),s=n(6006);let a=(0,s.createContext)({}),i=e=>{let{children:t,url:n}=e,[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(new Date),u=(0,s.useRef)(null),[d,m]=(0,s.useState)(null);return(0,s.useEffect)(()=>((function e(){console.log("Connecting to websocket"),u.current=new WebSocket(n),u.current.onopen=()=>{l(!0)},u.current.onclose=()=>(l(!1),console.log("Disconnected from websocket."),e()),u.current.onerror=e=>{console.error("WebSocket Error: ",e),u.current.close(),l(!1)}})(),()=>{u.current&&u.current.close()}),[n]),(0,s.useEffect)(()=>{c(new Date)},[i]),(0,s.useEffect)(()=>{let e=e=>{let t=JSON.parse(e.data);if("DEVICE-ERROR-LOG"===t.type){let e=JSON.parse(t.message);m(e)}};return u.current&&u.current.addEventListener("message",e),()=>{u.current.removeEventListener("message",e)}},[u.current]),(0,r.jsx)(a.Provider,{value:{isConnected:i,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return i?(u.current.send(JSON.stringify(e)),new Promise((e,r)=>{let s=n=>{let r=JSON.parse(n.data);if(t(r)){u.current.removeEventListener("message",s),clearTimeout(a);let t=r.message;r.message=JSON.parse(t),e(r)}},a=setTimeout(()=>{u.current.removeEventListener("message",s),r(Error("Timeout: Condition not met within ".concat(n," ms")))},n);u.current.addEventListener("message",s)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!i)throw Error("WebSocket is not connected");u.current.send(JSON.stringify(e));let n=e=>{let r=JSON.parse(e.data);t(r)&&u.current.removeEventListener("message",n)};u.current.addEventListener("message",n)},listenTillCondition:e=>i?new Promise(t=>{let n=r=>{let s=JSON.parse(r.data);e(s)&&(u.current.removeEventListener("message",n),t(s))};u.current.addEventListener("message",n)}):Promise.reject(Error("WebSocket is not connected")),socket:u,latestLog:d,sendMessage:e=>{if(!i)return Error("WebSocket is not connected");u.current.send(JSON.stringify(e))}},children:t})}},6008:function(e,t,n){e.exports=n(794)},3429:function(e,t,n){"use strict";n.d(t,{V:function(){return m}});var r=n(6006),s=n(3142),a=n(6878),i=n(465),l=n(5942);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){var r;return r=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===o(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=a.V.extend({defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0},css:{classes:{value:"p-tag-value",icon:"p-tag-icon",root:function(e){var t=e.props;return(0,l.AK)("p-tag p-component",c(c({},"p-tag-".concat(t.severity),null!==t.severity),"p-tag-rounded",t.rounded))}},styles:"\n@layer primereact {\n    .p-tag {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tag-icon,\n    .p-tag-value,\n    .p-tag-icon.pi {\n        line-height: 1.5;\n    }\n    \n    .p-tag.p-tag-rounded {\n        border-radius: 10rem;\n    }\n}\n"}});function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=r.forwardRef(function(e,t){var n=(0,i.c)(),o=r.useContext(s.Ou),m=u.getProps(e,o),p=u.setMetaData({props:m}),f=p.ptm,v=p.cx,h=p.isUnstyled;(0,a.e)(u.css.styles,h,{name:"tag"});var x=r.useRef(null),g=n({className:v("icon")},f("icon")),y=l.Cz.getJSXIcon(m.icon,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},g),{props:m});r.useImperativeHandle(t,function(){return{props:m,getElement:function(){return x.current}}});var b=n({ref:x,className:(0,l.AK)(m.className,v("root")),style:m.style},u.getOtherProps(m),f("root")),j=n({className:v("value")},f("value"));return r.createElement("span",b,y,r.createElement("span",j,m.value),r.createElement("span",null,m.children))});m.displayName="Tag"},7611:function(e,t,n){"use strict";var r=n(6054);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,i){if(i!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},9497:function(e,t,n){e.exports=n(7611)()},6054:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[8123,434,6878,6789,8285,9933,845,439,9217,7003,4046,769,6454,9253,5769,1744],function(){return e(e.s=3838)}),_N_E=e.O()}]);
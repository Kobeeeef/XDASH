(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2612],{2762:function(e,t,s){Promise.resolve().then(s.bind(s,1158))},1158:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(9268),r=s(6006),l=s(7537),a=s(7389),i=s(4046),o=s(6008),c=s(3702),d=s(4390),u=s(2723),m=s(2064),p=s(2980),f=["alias","apropos","apt-get","apt-cache","aptitude","arch","awk","basename","bash","bc","bg","bzip2","cal","cat","cd","cfdisk","chgrp","chmod","chown","chroot","chkconfig","cksum","clear","cmp","comm","command","compress","cp","cron","crontab","csplit","curl","cut","date","dc","dd","ddrescue","declare","df","diff","diff3","dig","dir","dircolors","dirname","dirs","dmesg","du","echo","egrep","eject","enable","env","ethtool","eval","exec","exit","expect","expand","export","expr","false","fdformat","fdisk","fg","fgrep","file","find","fmt","fold","for","free","fsck","ftp","gawk","getopts","grep","groupadd","groupdel","groupmod","groups","gzip","hash","head","help","history","hostname","htop","iconv","id","ifconfig","ifdown","ifup","import","install","jobs","join","journalctl","kill","killall","less","let","link","ln","locate","logname","logout","look","lpc","lpr","lprint","lprintd","lprintq","lprm","ls","lsblk","lsof","make","man","mkdir","mkfifo","mkisofs","mknod","more","most","mount","mtools","mv","mmv","nano","netstat","nice","nl","nohup","notify-send","nslookup","open","op","passwd","paste","pathchk","ping","pkill","popd","pr","printcap","printenv","printf","ps","pushd","pv","pwd","quota","quotacheck","quotactl","ram","rcp","read","readarray","readonly","reboot","rename","renice","remsync","return","rev","rm","rmdir","rsync","scp","screen","sdiff","sed","select","seq","set","sftp","shift","shopt","shutdown","sleep","slocate","sort","source","split","ssh","stat","strace","su","sudo","sum","suspend","sync","systemctl","systemd-analyze","tail","tar","tee","test","time","times","touch","top","traceroute","trap","true","tsort","tty","type","ulimit","umask","umount","unalias","uname","unexpand","uniq","units","unset","unshar","useradd","userdel","usermod","users","uudecode","uuencode","vdir","vi","vim","vmstat","w","watch","wc","whereis","which","who","whoami","xargs","yes","yum","zip","unzip"],h=()=>{var e,t;let[s,h]=(0,r.useState)([]),v=(0,r.useRef)(null),x=(0,o.useSearchParams)(),g=x.get("server"),[N,b]=(0,r.useState)(null),{isConnected:E,lastConnectionUpdate:y,sendMessageAndWaitForCondition:j,sendMessage:w,socket:C}=(0,r.useContext)(l.U),k=(0,r.useRef)(null),[S,D]=(0,r.useState)(0),[O,T]=(0,r.useState)(!0),[L,M]=(0,r.useState)([]),I=(0,r.useRef)(null),[A,R]=(0,r.useState)(""),[J,_]=(0,r.useState)({}),[V,W]=(0,r.useState)(!1),[P,U]=(0,r.useState)(!1),[q,H]=(0,r.useState)(!1),[z,F]=(0,r.useState)(!0),[Z,G]=(0,r.useState)([]);function K(){if("clear"===A.trim().toLowerCase()){M([]),R("");return}!q&&A.trim().toLowerCase().startsWith("exit")&&T(!0),U(!0),M(e=>[...e,"\x1b[92m$ "+(null==J?void 0:J.hostname)+" "+A]),h(e=>[...e,A]),w({type:q?"DEVICE-COMMAND-SUDO":"DEVICE-COMMAND",message:JSON.stringify({server:N,command:A})}),R(""),U(!1)}function X(e){U(!0),M(t=>[...t,"\x1b[92m$ "+(null==J?void 0:J.hostname)+" "+e]),w({type:"DEVICE-COMMAND-CONTROL",message:JSON.stringify({server:N,command:e})}),U(!1)}return(0,r.useEffect)(()=>{b(g)},[g]),(0,r.useEffect)(()=>{let e=setInterval(()=>{E&&j({type:"DEVICE-DATA",message:N},e=>"DEVICE-DATA"===e.type).then(e=>{var t,s;(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.exists)?((null===(s=e.message)||void 0===s?void 0:s.status)!=="CONNECTED"&&T(!0),_(e.message),W(!1)):(W(!0),T(!0),_({}))}).catch(()=>{})},100);return()=>clearInterval(e)},[E,N]),(0,r.useEffect)(()=>{let e=()=>{document.activeElement!==k.current&&k.current.focus()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,r.useEffect)(()=>{var e;I&&z&&(null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"instant"}))},[z,L]),(0,r.useEffect)(()=>{let e=e=>{let t=JSON.parse(e.data);if("DEVICE-SHELL"===t.type){let e=JSON.parse(t.message);M(t=>[...t,""+e.response])}};return C.current&&(C.current.addEventListener("message",e),M(e=>[...e,"\x1b[92mXDASH: Registered listener."])),()=>{C.current.removeEventListener("message",e),M(e=>[...e,"\x1b[92mXDASH: Unregistered listener."])}},[C.current]),(0,n.jsxs)("div",{className:"grid fadeIn",children:[(0,n.jsx)(i.F,{ref:v}),(0,n.jsx)(d.V,{header:"Machine Discovery Failed",modal:!1,visible:V,position:"top-right",style:{width:"50vw"},onHide:()=>{V&&W(!1)},closable:!1,draggable:!0,resizable:!1,children:(0,n.jsxs)("p",{className:"m-0",children:["The machine with the server name ",(0,n.jsx)("strong",{children:N})," was not found on the network running XCASTER. Please check your network connection, verify the machine is on and try again later."]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(E?"text-green-600":"text-red-600 animate-pulse"),children:E?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:y})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Machine Server"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(E&&N?(null==J?void 0:J.status)==="CONNECTED"?"text-green-600":(null==J?void 0:J.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:E?null!=N?N:"Unknown":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-desktop text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:y})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Hostname"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(E&&N&&(null==J?void 0:J.hostname)?(null==J?void 0:J.status)==="CONNECTED"?"text-green-600":(null==J?void 0:J.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:E&&null!==(e=null==J?void 0:J.hostname)&&void 0!==e?e:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-address-book text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:y})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"IP Address"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(E&&N&&(null==J?void 0:J.address)?(null==J?void 0:J.status)==="CONNECTED"?"text-green-600":(null==J?void 0:J.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:E&&null!==(t=null==J?void 0:J.address)&&void 0!==t?t:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-map-marker text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:y})]})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:"40rem"},children:[L.map((e,t)=>(0,n.jsx)(u.Z,{log:e},t)),(0,n.jsx)("div",{ref:I})]})}),(0,n.jsxs)("div",{className:"p-inputgroup flex-1 w-full",children:[(0,n.jsx)(m.a,{severity:O?"success":"danger",disabled:!E||(null==J?void 0:J.status)!=="CONNECTED",label:O?"Connect":"Reconnect",loading:P,onClick:()=>{T(!1),U(!0),j({type:"DEVICE-COMMAND-NEW-SESSION",message:N},e=>"DEVICE-COMMAND-NEW-SESSION"===e.type).then(e=>{var t;U(!1),(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.success)?v.current.show({severity:"success",summary:"Successful Creation",detail:"A new shell channel has been created."}):v.current.show({severity:"error",summary:"Unsuccessful Creation",detail:"The new shell channel failed to create."})}).catch(e=>{let t=e.message||"An unexpected error occurred.";v.current.show({severity:"error",summary:"Failed To Connect",detail:t}),U(!1)})},model:[{label:q?"Disable Root":"Enable Root",icon:q?"pi pi-user":"pi pi-crown",command:()=>{H(e=>!e)}},{label:z?"Disable Lock":"Enable Lock",icon:z?"pi pi-lock":"pi pi-unlock",command:()=>{F(e=>!e)}},{label:"Clear Terminal",icon:"pi pi-eraser",command:()=>{M([])}}]}),(0,n.jsx)("span",{className:"p-inputgroup-addon",children:(0,n.jsx)("i",{className:"pi "+(q?"pi-crown":"pi-user")})}),(0,n.jsxs)("span",{className:"p-inputgroup-addon font-bold "+(E&&N&&(null==J?void 0:J.address)?(null==J?void 0:J.status)==="CONNECTED"?"text-green-600":(null==J?void 0:J.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:["$ ",N]}),(0,n.jsx)(p.Q,{inputRef:k,completeMethod:e=>{G([...new Set([...f,...s||[]])].filter(t=>null==t?void 0:t.startsWith(e.query)))},suggestions:Z,disabled:!E||P||(null==J?void 0:J.status)!=="CONNECTED",value:A,onChange:e=>{R(t=>(D(0),e.target.value))},onKeyDown:e=>{if(A&&("Enter"===e.key||"NumpadEnter"===e.key))e.preventDefault(),K();else if("ArrowUp"===e.key){if(e.preventDefault(),s&&s.length){let e=S-1<0?s.length-1:S-1,t=s[e];D(e),R(t)}}else if("ArrowDown"===e.key){if(e.preventDefault(),s&&s.length){let e=S+1>=s.length?0:S+1,t=s[e];D(e),R(t)}}else e.ctrlKey&&"c"===e.key?(e.preventDefault(),X("CTRL_C")):e.ctrlKey&&"j"===e.key?(e.preventDefault(),X("CTRL_J")):e.ctrlKey&&"x"===e.key?(e.preventDefault(),X("CTRL_X")):e.ctrlKey&&"d"===e.key&&(e.preventDefault(),X("CTRL_D"),T(!0))}}),(0,n.jsx)(c.z,{disabled:!E||!A||(null==J?void 0:J.status)!=="CONNECTED",loading:P,label:"Send",onClick:K})]})]})})]})}},7389:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(9268),r=s(6006);let l=e=>{let t=new Date-new Date(e),s=Math.floor(t/1e3),n=Math.floor(s/31536e3);return n>1?"".concat(n," years ago"):(n=Math.floor(s/2592e3))>1?"".concat(n," months ago"):(n=Math.floor(s/86400))>1?"".concat(n," days ago"):(n=Math.floor(s/3600))>1?"".concat(n," hours ago"):(n=Math.floor(s/60))>1?"".concat(n," minutes ago"):s>=1?"".concat(s," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var a=e=>{let{date:t,className:s,refresh:a=100}=e,[i,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{o(l(t));let e=setInterval(()=>{o(l(t))},a);return()=>clearInterval(e)},[t,a]),(0,n.jsx)("span",{className:s,children:i})}},7537:function(e,t,s){"use strict";s.d(t,{U:function(){return l},q:function(){return a}});var n=s(9268),r=s(6006);let l=(0,r.createContext)({}),a=e=>{let{children:t,url:s}=e,[a,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(new Date),d=(0,r.useRef)(null),[u,m]=(0,r.useState)(null);return(0,r.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(s),d.current.onopen=()=>{i(!0)},d.current.onclose=()=>(i(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),i(!1)}})(),()=>{d.current&&d.current.close()}),[s]),(0,r.useEffect)(()=>{c(new Date)},[a]),(0,r.useEffect)(()=>{let e=e=>{let t=JSON.parse(e.data);if("DEVICE-ERROR-LOG"===t.type){let e=JSON.parse(t.message);m(e)}};return d.current&&d.current.addEventListener("message",e),()=>{d.current.removeEventListener("message",e)}},[d.current]),(0,n.jsx)(l.Provider,{value:{isConnected:a,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return a?(d.current.send(JSON.stringify(e)),new Promise((e,n)=>{let r=s=>{let n=JSON.parse(s.data);if(t(n)){d.current.removeEventListener("message",r),clearTimeout(l);let t=n.message;n.message=JSON.parse(t),e(n)}},l=setTimeout(()=>{d.current.removeEventListener("message",r),n(Error("Timeout: Condition not met within ".concat(s," ms")))},s);d.current.addEventListener("message",r)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!a)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let s=e=>{let n=JSON.parse(e.data);t(n)&&d.current.removeEventListener("message",s)};d.current.addEventListener("message",s)},listenTillCondition:e=>a?new Promise(t=>{let s=n=>{let r=JSON.parse(n.data);e(r)&&(d.current.removeEventListener("message",s),t(r))};d.current.addEventListener("message",s)}):Promise.reject(Error("WebSocket is not connected")),socket:d,latestLog:u,sendMessage:e=>{if(!a)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},2723:function(e,t,s){"use strict";var n=s(9268);s(6006);var r=s(2153),l=s.n(r);let a=new(l())({fg:"#FFF",bg:"#000",newline:!0,escapeXML:!1,stream:!1}),i=e=>{var t,s;return a.toHtml(null!==(s=null==e?void 0:null===(t=e.replace("\x1b[?2004h","\x1b[92m"))||void 0===t?void 0:t.replace("\x1b[?2004l",""))&&void 0!==s?s:"")};t.Z=e=>{let{log:t}=e,s=i(t);return(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:s}})}}},function(e){e.O(0,[434,6878,6789,8285,9933,9217,4046,8236,2064,4074,9253,5769,1744],function(){return e(e.s=2762)}),_N_E=e.O()}]);
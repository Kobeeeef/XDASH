(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2612],{2762:function(e,t,s){Promise.resolve().then(s.bind(s,1158))},1158:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(9268),r=s(6006),l=s(7537),a=s(7389),i=s(4046),o=s(6008),c=s(3702),d=s(4390),u=s(2723),m=s(2064),p=s(2980),x=["alias","apropos","apt-get","apt-cache","aptitude","arch","awk","basename","bash","bc","bg","bzip2","cal","cat","cd","cfdisk","chgrp","chmod","chown","chroot","chkconfig","cksum","clear","cmp","comm","command","compress","cp","cron","crontab","csplit","curl","cut","date","dc","dd","ddrescue","declare","df","diff","diff3","dig","dir","dircolors","dirname","dirs","dmesg","du","echo","egrep","eject","enable","env","ethtool","eval","exec","exit","expect","expand","export","expr","false","fdformat","fdisk","fg","fgrep","file","find","fmt","fold","for","free","fsck","ftp","gawk","getopts","grep","groupadd","groupdel","groupmod","groups","gzip","hash","head","help","history","hostname","htop","iconv","id","ifconfig","ifdown","ifup","import","install","jobs","join","journalctl","kill","killall","less","let","link","ln","locate","logname","logout","look","lpc","lpr","lprint","lprintd","lprintq","lprm","ls","lsblk","lsof","make","man","mkdir","mkfifo","mkisofs","mknod","more","most","mount","mtools","mv","mmv","nano","netstat","nice","nl","nohup","notify-send","nslookup","open","op","passwd","paste","pathchk","ping","pkill","popd","pr","printcap","printenv","printf","ps","pushd","pv","pwd","quota","quotacheck","quotactl","ram","rcp","read","readarray","readonly","reboot","rename","renice","remsync","return","rev","rm","rmdir","rsync","scp","screen","sdiff","sed","select","seq","set","sftp","shift","shopt","shutdown","sleep","slocate","sort","source","split","ssh","stat","strace","su","sudo","sum","suspend","sync","systemctl","systemd-analyze","tail","tar","tee","test","time","times","touch","top","traceroute","trap","true","tsort","tty","type","ulimit","umask","umount","unalias","uname","unexpand","uniq","units","unset","unshar","useradd","userdel","usermod","users","uudecode","uuencode","vdir","vi","vim","vmstat","w","watch","wc","whereis","which","who","whoami","xargs","yes","yum","zip","unzip"],h=()=>{var e,t;let s=(0,r.useRef)(null),h=(0,o.useSearchParams)(),f=h.get("server"),[v,g]=(0,r.useState)(null),{isConnected:b,lastConnectionUpdate:N,sendMessageAndWaitForCondition:j,sendMessage:y,socket:E}=(0,r.useContext)(l.WebsocketContext),[k,w]=(0,r.useState)(new Date),[C,S]=(0,r.useState)([]),D=(0,r.useRef)(null),[O,T]=(0,r.useState)(""),[M,I]=(0,r.useState)({}),[L,A]=(0,r.useState)(!1),[J,W]=(0,r.useState)(!1),[_,R]=(0,r.useState)(!1),[V,H]=(0,r.useState)(!0),[P,q]=(0,r.useState)([]);function z(){if("clear"===O.trim().toLowerCase()){S([]),T("");return}W(!0),S(e=>[...e,"\x1b[92m$ "+(null==M?void 0:M.hostname)+" "+O]),y({type:_?"DEVICE-COMMAND-SUDO":"DEVICE-COMMAND",message:JSON.stringify({server:v,command:O})}),T(""),W(!1)}function Z(e){W(!0),S(t=>[...t,"\x1b[92m$ "+(null==M?void 0:M.hostname)+" "+e]),y({type:"DEVICE-COMMAND-CONTROL",message:JSON.stringify({server:v,command:e})}),W(!1)}return(0,r.useEffect)(()=>{g(f)},[f]),(0,r.useEffect)(()=>{let e=setInterval(()=>{b&&j({type:"DEVICE-DATA",message:v},e=>"DEVICE-DATA"===e.type).then(e=>{var t;(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.exists)?(I(e.message),A(!1)):(A(!0),I({}))}).catch(()=>{})},100);return()=>clearInterval(e)},[b,v]),(0,r.useEffect)(()=>{var e;D&&V&&(null===(e=D.current)||void 0===e||e.scrollIntoView({behavior:"instant"}))},[V,C]),(0,r.useEffect)(()=>{let e=e=>{let t=JSON.parse(e.data);if("DEVICE-SHELL"===t.type){let e=JSON.parse(t.message);S(t=>[...t,""+e.response])}};return E.current&&(E.current.addEventListener("message",e),S(e=>[...e,"\x1b[92mXDASH: Registered listener."])),()=>{E.current.removeEventListener("message",e),S(e=>[...e,"\x1b[92mXDASH: Unregistered listener."])}},[E.current]),(0,n.jsxs)("div",{className:"grid fadeIn",children:[(0,n.jsx)(i.F,{ref:s}),(0,n.jsx)(d.V,{header:"Machine Discovery Failed",modal:!1,visible:L,position:"top-right",style:{width:"50vw"},onHide:()=>{L&&A(!1)},closable:!1,draggable:!0,resizable:!1,children:(0,n.jsxs)("p",{className:"m-0",children:["The machine with the server name ",(0,n.jsx)("strong",{children:v})," was not found on the network running XCASTER. Please check your network connection, verify the machine is on and try again later."]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(b?"text-green-600":"text-red-600 animate-pulse"),children:b?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:N})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 sm:col-4 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Machine Server"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(b&&v?(null==M?void 0:M.status)==="CONNECTED"?"text-green-600":(null==M?void 0:M.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:b?null!=v?v:"Unknown":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-desktop text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:N})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Hostname"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(b&&v&&(null==M?void 0:M.hostname)?(null==M?void 0:M.status)==="CONNECTED"?"text-green-600":(null==M?void 0:M.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:b&&null!==(e=null==M?void 0:M.hostname)&&void 0!==e?e:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-address-book text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:k})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"IP Address"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(b&&v&&(null==M?void 0:M.address)?(null==M?void 0:M.status)==="CONNECTED"?"text-green-600":(null==M?void 0:M.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:b&&null!==(t=null==M?void 0:M.address)&&void 0!==t?t:"Unknown"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-map-marker text-blue-500 text-xl"})})]}),(0,n.jsx)(a.Z,{date:k})]})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:"40rem"},children:[C.map((e,t)=>(0,n.jsx)(u.Z,{log:e},t)),(0,n.jsx)("div",{ref:D})]})}),(0,n.jsxs)("div",{className:"p-inputgroup flex-1 w-full",children:[(0,n.jsx)(m.a,{severity:"warning",disabled:!b||(null==M?void 0:M.status)!=="CONNECTED",label:"Restart",onClick:()=>{y({type:"DEVICE-COMMAND-NEW-SESSION",message:v})},model:[{label:_?"Disable Sudo":"Enable Sudo",icon:_?"pi pi-user":"pi pi-crown",command:()=>{R(e=>!e)}},{label:V?"Disable Lock":"Enable Lock",icon:V?"pi pi-lock":"pi pi-unlock",command:()=>{H(e=>!e)}},{label:"Clear Terminal",icon:"pi pi-eraser",command:()=>{S([])}}]}),(0,n.jsx)("span",{className:"p-inputgroup-addon",children:(0,n.jsx)("i",{className:"pi "+(_?"pi-crown":"pi-user")})}),(0,n.jsxs)("span",{className:"p-inputgroup-addon font-bold "+(b&&v&&(null==M?void 0:M.address)?(null==M?void 0:M.status)==="CONNECTED"?"text-green-600":(null==M?void 0:M.status)==="CONNECTING"?"animate-pulse-fast text-yellow-500":"animate-pulse text-red-600":"animate-pulse text-red-600"),children:["$ ",v]}),(0,n.jsx)(p.Q,{completeMethod:e=>{q(x.filter(t=>t.startsWith(e.query)))},suggestions:P,disabled:!b||J||(null==M?void 0:M.status)!=="CONNECTED",value:O,onChange:e=>T(e.target.value),onKeyDown:e=>{O&&"Enter"===e.key?z():e.ctrlKey&&"c"===e.key?(e.preventDefault(),Z("CTRL_C")):e.ctrlKey&&"j"===e.key?(e.preventDefault(),Z("CTRL_J")):e.ctrlKey&&"x"===e.key&&(e.preventDefault(),Z("CTRL_X"))}}),(0,n.jsx)(c.z,{disabled:!b||!O||(null==M?void 0:M.status)!=="CONNECTED",loading:J,label:"Send",onClick:z})]})]})})]})}},7389:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(9268),r=s(6006);let l=e=>{let t=new Date-new Date(e),s=Math.floor(t/1e3),n=Math.floor(s/31536e3);return n>1?"".concat(n," years ago"):(n=Math.floor(s/2592e3))>1?"".concat(n," months ago"):(n=Math.floor(s/86400))>1?"".concat(n," days ago"):(n=Math.floor(s/3600))>1?"".concat(n," hours ago"):(n=Math.floor(s/60))>1?"".concat(n," minutes ago"):s>=1?"".concat(s," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var a=e=>{let{date:t,className:s}=e,[a,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{i(l(t));let e=setInterval(()=>{i(l(t))},100);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{className:s,children:a})}},7537:function(e,t,s){"use strict";s.r(t),s.d(t,{WebSocketProvider:function(){return a},WebsocketContext:function(){return l}});var n=s(9268),r=s(6006);let l=(0,r.createContext)({}),a=e=>{let{children:t,url:s}=e,[a,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(new Date),d=(0,r.useRef)(null);return(0,r.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(s),d.current.onopen=()=>{i(!0)},d.current.onclose=()=>(i(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),i(!1)}})(),()=>{d.current&&d.current.close()}),[s]),(0,r.useEffect)(()=>{c(new Date)},[a]),(0,n.jsx)(l.Provider,{value:{isConnected:a,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return a?(d.current.send(JSON.stringify(e)),new Promise((e,n)=>{let r=s=>{let n=JSON.parse(s.data);if(t(n)){d.current.removeEventListener("message",r),clearTimeout(l);let t=n.message;n.message=JSON.parse(t),e(n)}},l=setTimeout(()=>{d.current.removeEventListener("message",r),n(Error("Timeout: Condition not met within ".concat(s," ms")))},s);d.current.addEventListener("message",r)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!a)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let s=e=>{let n=JSON.parse(e.data);t(n)&&d.current.removeEventListener("message",s)};d.current.addEventListener("message",s)},socket:d,sendMessage:e=>{if(!a)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},2723:function(e,t,s){"use strict";var n=s(9268);s(6006);var r=s(2153),l=s.n(r);let a=new(l())({fg:"#FFF",bg:"#000",newline:!0,escapeXML:!1,stream:!1}),i=e=>{var t,s;return a.toHtml(null!==(s=null==e?void 0:null===(t=e.replace("\x1b[?2004h","\x1b[92m"))||void 0===t?void 0:t.replace("\x1b[?2004l",""))&&void 0!==s?s:"")};t.Z=e=>{let{log:t}=e,s=i(t);return(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:s}})}}},function(e){e.O(0,[434,6878,6789,8285,3901,7994,4390,2980,2064,4074,9253,5769,1744],function(){return e(e.s=2762)}),_N_E=e.O()}]);
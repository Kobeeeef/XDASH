(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9971],{67:function(){},2061:function(){},109:function(e,t,l){Promise.resolve().then(l.bind(l,3449))},3449:function(e,t,l){"use strict";l.r(t);var n=l(9268),s=l(6006),a=l(8671),i=l(7490),r=l(3702),o=l(439),c=l(3621),d=l(7537),u=l(7389),v=l(845),m=l(4046),h=l(4390),x=l(315),f=l(5942),p=l(6595),b=l(8176),g=l(8298),j=l(2059);t.default=()=>{var e,t,l,y,S,N,k,w,C;let E=(0,s.useRef)(),[A,D]=(0,s.useState)({}),[M,T]=(0,s.useState)(!1),{isConnected:O,lastConnectionUpdate:L,sendMessageAndWaitForCondition:P}=(0,s.useContext)(d.WebsocketContext),[V,I]=(0,s.useState)(!1),[W,R]=(0,s.useState)(new Date),[_,B]=(0,s.useState)({}),[J,K]=(0,s.useState)({name:"Line Chart",type:"line"}),{layoutConfig:Z}=(0,s.useContext)(a.V),z=(0,s.useRef)(null),[F,X]=(0,s.useState)(1e3),[H,U]=(0,s.useState)(!1),[q,G]=(0,s.useState)([]),Q=getComputedStyle(document.documentElement),[Y,$]=(0,s.useState)(null),[ee,et]=(0,s.useState)(""),[el,en]=(0,s.useState)();(0,s.useEffect)(()=>{let e=setInterval(()=>{O&&P({type:"XTABLES-DATA"},e=>"XTABLES-DATA"===e.type).then(e=>{if(I(t=>{var l,n,s,a;return(null==e?void 0:null===(l=e.message)||void 0===l?void 0:l.connected)!==t&&R(new Date),(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.connected)||U(!1),null!==(a=null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)&&void 0!==a&&a}),H){let t=new Date().toISOString(),l=function(e){let t=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{let[n,s]=e,a={key:l?"".concat(l,".").concat(n):n,name:n};return"object"==typeof s&&null!==s?(s.hasOwnProperty("value")&&(a.value=s.value,a.type=(typeof JSON.parse(s.value)).toString()),s.data&&(a.data=t(s.data,a.key))):(a.value=s,a.type=(typeof JSON.parse(s)).toString()),a})};return t(e)}(JSON.parse(e.message.json))||[],n=(e,t)=>{for(let l of e){if(l.key===t)return l;if(l.data){let e=n(l.data,t);if(e)return e}}return null};en(e=>{let s={time:t};return q.forEach(e=>{let t=n(l,e);t&&(s[t.key]=null==t?void 0:t.value)}),[s,...e||[]]}),B(e=>{var s,a;let i=!1,r=((null===(s=e.lineData)||void 0===s?void 0:s.datasets)||[]).map(e=>({...e})),o=[...(null===(a=e.lineData)||void 0===a?void 0:a.labels)||[]];return(q.forEach(e=>{let t=r.find(t=>t.label===e),s=n(l,e),a=null==s?void 0:s.value;s&&(t||(t={label:e,data:[],fill:!1,tension:.4},r.push(t)),t.data=[...t.data||[],a],i=!0)}),i)?(o.push(t),{lineData:{labels:o,datasets:r}}):e})}}).catch(()=>{})},F),t=setInterval(()=>{O&&P({type:"XTABLES-STATUS"},e=>"XTABLES-STATUS"===e.type).then(e=>{I(t=>{var l,n,s;return(null==e?void 0:null===(l=e.message)||void 0===l?void 0:l.connected)!==t&&R(new Date),null!==(s=null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.connected)&&void 0!==s&&s})}).catch(()=>{})},500);return()=>{clearInterval(e),clearInterval(t)}},[O,P,F,H]),(0,s.useEffect)(()=>{let e=Q.getPropertyValue("--text-color")||"#495057",t=Q.getPropertyValue("--text-color-secondary")||"#6c757d",l=Q.getPropertyValue("--surface-border")||"#dfe7ef";D({lineOptions:{plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:t},grid:{color:l},border:{display:!1}},y:{ticks:{color:t},grid:{color:l},border:{display:!1}}}}})},[Z]);let es=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:()=>{T(!1),et(null)}}),(0,n.jsx)(r.z,{disabled:null!==(0,p.Z)(ee),label:"Save",icon:"pi pi-check",onClick:()=>{T(!1),G(e=>(e.push(ee),e)),et(null)}})]});return(0,n.jsxs)("div",{className:"grid p-fluid fadeIn",children:[(0,n.jsx)(m.F,{ref:z}),(0,n.jsx)(h.V,{style:{width:"450px"},visible:M,header:"Key Details",modal:!0,className:"p-fluid",footer:es,onHide:()=>{T(!1),et(null)},children:(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{htmlFor:"key",children:"Key Name"}),(0,n.jsx)(x.o,{id:"key",value:ee,onChange:e=>{et(e.target.value)},required:!0,autoFocus:!0,className:(0,f.AK)({"p-invalid":null!==(0,p.Z)(ee)})}),null===(0,p.Z)(ee)?null:(0,n.jsx)("small",{className:"p-invalid",children:(0,p.Z)(ee)})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,n.jsxs)("div",{className:"text-900 font-medium text-xl "+(O?"text-green-600":"text-red-600 animate-pulse"),children:[" ",O?"Connected":"Disconnected"]})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:L})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl "+(O&&V?"text-green-600":"text-red-600 animate-pulse"),children:O&&V?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:W})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Intervals Recorded"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(l=null==el?void 0:el.length)&&void 0!==l?l:0})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-database text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:W})]})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-12 lg:col-3",children:(0,n.jsx)(r.z,{disabled:H||!O||!V,label:"Add",icon:"pi pi-plus",onClick:()=>{T(!0)}})}),(0,n.jsx)("div",{className:"col-12 md:col-3",children:(0,n.jsxs)("div",{className:"p-inputgroup",children:[(0,n.jsx)(r.z,{onClick:()=>{G(e=>{let t=e.indexOf(Y);return -1===t?(z.current.show({severity:"error",summary:"Failure",detail:"The key was not found."}),e):(e.splice(t,1).length>0?($(null),z.current.show({severity:"success",summary:"Success",detail:"The key was removed."})):z.current.show({severity:"error",summary:"Failure",detail:"The key could not be removed."}),e)}),$(null)},disabled:H||!O||!V||!(null==q?void 0:q.length),severity:"danger",label:"Remove"}),(0,n.jsx)(v.L,{disabled:H||!O||!V||!(null==q?void 0:q.length),value:Y,onChange:e=>{$(e.value)},options:q,placeholder:"Delete Key"})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,n.jsx)(o.R,{disabled:H||!O||!V,value:F,onValueChange:e=>X(null!==(y=e.value)&&void 0!==y?y:100),suffix:" millisecond".concat(F>1?"s":""," per record")})}),(0,n.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,n.jsx)(v.L,{disabled:H||!O||!V,value:J,onChange:e=>{K(e.value)},options:[{name:"Line Chart",type:"line"},{name:"Bar Chart",type:"bar"},{name:"Radar Chart",type:"radar"},{name:"Polar Area",type:"polarArea"},{name:"Pie Chart",type:"pie"},{name:"Doughnut Chart",type:"doughnut"}],optionLabel:"name",placeholder:"Select Chart"})}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)(r.z,{disabled:!O||!V||H||!(null==_?void 0:null===(t=_.lineData)||void 0===t?void 0:null===(e=t.labels)||void 0===e?void 0:e.length)&&!(null===(S=null==el?void 0:el.length)||void 0===S||S)&&!(null===(N=null==q?void 0:q.length)||void 0===N||N),label:"Reset",severity:"danger",onClick:()=>{B({}),en([]),G([]),z.current.show({severity:"success",summary:"Success",detail:"All settings and charts reset."})}})}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)(c.C,{disabled:!O||!V||!(null==q?void 0:q.length),onLabel:"Stop Recording",offLabel:"Start Recording",checked:H,onChange:e=>U(e.value)})})]})})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsx)(i.k,{type:null!==(k=null==J?void 0:J.type)&&void 0!==k?k:"line",data:_.lineData,options:A.lineOptions})})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"grid",children:[(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)(r.z,{disabled:(null!==(w=null==el?void 0:el.length)&&void 0!==w?w:0)===0,label:"Export CSV",icon:"pi pi-file",onClick:()=>{E.current.exportCSV({selectionOnly:!1})}})}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)(r.z,{disabled:(null!==(C=null==el?void 0:el.length)&&void 0!==C?C:0)===0,severity:"success",label:"Export Excel",icon:"pi pi-file-excel",onClick:()=>{(0,j.r)("XTABLES-GRAPHS",el)}})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsxs)(b.w,{scrollable:!0,virtualScrollerOptions:{itemSize:15},scrollHeight:"500px",ref:E,emptyMessage:"There is no data recorded.",value:el,children:[(0,n.jsx)(g.s,{field:"time",header:"Time"}),q.map((e,t)=>(0,n.jsx)(g.s,{field:e,header:e},t))]})})]})})})]})}},7389:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var n=l(9268),s=l(6006);let a=e=>{let t=new Date-new Date(e),l=Math.floor(t/1e3),n=Math.floor(l/31536e3);return n>1?"".concat(n," years ago"):(n=Math.floor(l/2592e3))>1?"".concat(n," months ago"):(n=Math.floor(l/86400))>1?"".concat(n," days ago"):(n=Math.floor(l/3600))>1?"".concat(n," hours ago"):(n=Math.floor(l/60))>1?"".concat(n," minutes ago"):l>=1?"".concat(l," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var i=e=>{let{date:t,className:l}=e,[i,r]=(0,s.useState)("");return(0,s.useEffect)(()=>{r(a(t));let e=setInterval(()=>{r(a(t))},100);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{className:l,children:i})}},8671:function(e,t,l){"use strict";l.d(t,{V:function(){return a},a:function(){return i}});var n=l(9268),s=l(6006);let a=(0,s.createContext)({}),i=e=>{let{children:t}=e,[l,i]=(0,s.useState)({inputStyle:"outlined",menuMode:"static",colorScheme:"dark",theme:"lara-dark-indigo",scale:14}),[r,o]=(0,s.useState)({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1}),c=()=>"overlay"===l.menuMode,d=()=>window.innerWidth>991;return(0,n.jsx)(a.Provider,{value:{layoutConfig:l,setLayoutConfig:i,layoutState:r,setLayoutState:o,onMenuToggle:()=>{c()&&o(e=>({...e,overlayMenuActive:!e.overlayMenuActive})),d()?o(e=>({...e,staticMenuDesktopInactive:!e.staticMenuDesktopInactive})):o(e=>({...e,staticMenuMobileActive:!e.staticMenuMobileActive}))},showProfileSidebar:()=>{o(e=>({...e,profileSidebarVisible:!e.profileSidebarVisible}))}},children:t})}},7537:function(e,t,l){"use strict";l.r(t),l.d(t,{WebSocketProvider:function(){return i},WebsocketContext:function(){return a}});var n=l(9268),s=l(6006);let a=(0,s.createContext)({}),i=e=>{let{children:t,url:l}=e,[i,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(new Date),d=(0,s.useRef)(null);return(0,s.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(l),d.current.onopen=()=>{r(!0)},d.current.onclose=()=>(r(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),r(!1)}})(),()=>{d.current&&d.current.close()}),[l]),(0,s.useEffect)(()=>{c(new Date)},[i]),(0,n.jsx)(a.Provider,{value:{isConnected:i,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return i?(d.current.send(JSON.stringify(e)),new Promise((e,n)=>{let s=l=>{let n=JSON.parse(l.data);if(t(n)){d.current.removeEventListener("message",s),clearTimeout(a);let t=n.message;n.message=JSON.parse(t),e(n)}},a=setTimeout(()=>{d.current.removeEventListener("message",s),n(Error("Timeout: Condition not met within ".concat(l," ms")))},l);d.current.addEventListener("message",s)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!i)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let l=e=>{let n=JSON.parse(e.data);t(n)&&d.current.removeEventListener("message",l)};d.current.addEventListener("message",l)},socket:d,sendMessage:e=>{if(!i)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},6595:function(e,t){"use strict";t.Z=function(e){if(null==e||""===e.trim())return"Key cannot be null or empty.";if(e.includes(" "))return"Key cannot contain spaces.";if(e.startsWith(".")||e.endsWith("."))return"Key cannot start or end with '.'";if(e.includes(".."))return"Key cannot contain multiple consecutive '.'";let t=e.split(".");for(let e of t)if(""===e.trim())return"Key contains empty part(s).";return null}},2059:function(e,t,l){"use strict";l.d(t,{r:function(){return i}});var n=l(9985),s=l(9219);let a=(e,t)=>{Promise.resolve().then(l.t.bind(l,9985,23)).then(l=>{let s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,n.saveAs)(s,t+"_export_"+new Date().getTime()+".xlsx")})},i=(e,t)=>{let l=s.P6.json_to_sheet(t),n=s.default.write({Sheets:{data:l},SheetNames:["data"]},{bookType:"xlsx",type:"array"});a(n,e)}}},function(e){e.O(0,[8123,5087,434,6878,6789,8285,9933,845,2087,7994,7136,4390,1280,9253,5769,1744],function(){return e(e.s=109)}),_N_E=e.O()}]);
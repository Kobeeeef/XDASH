(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7974],{9386:function(e,t,r){Promise.resolve().then(r.bind(r,7813))},7813:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(9268),s=r(3702),o=r(8298),i=r(8176),l=r(6006),a=r(8671),c=r(3429),d=r(7537),u=r(7389),m=r(9497),v=r.n(m);let f=e=>{let{delay:t=500}=e,[r,s]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=setInterval(()=>{s(e=>{switch(e){case"":return".";case".":return"..";case"..":return"...";default:return""}})},t);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{children:r})};f.propTypes={delay:v().number};var h=r(4046),p=r(2723),x=r(6008),b=()=>{var e;let t=(0,l.useRef)(null),[r,m]=(0,l.useState)({}),[v,b]=(0,l.useState)({}),{layoutConfig:g}=(0,l.useContext)(a.V),{isConnected:y,lastConnectionUpdate:j,sendMessageAndWaitForCondition:N}=(0,l.useContext)(d.WebsocketContext),[S,w]=(0,l.useState)(!1),[E,C]=(0,l.useState)([]),[O,D]=(0,l.useState)(new Date),[T,k]=(0,l.useState)(new Date),[M,P]=(0,l.useState)([]),I=(0,x.useRouter)(),[A,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=setInterval(()=>{y&&N({type:"DEVICES-DATA"},e=>"DEVICES-DATA"===e.type).then(e=>{w(t=>{var r,n;return(null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.xtablesConnectedStatus)!==t&&D(new Date),null===(n=e.message)||void 0===n?void 0:n.xtablesConnectedStatus}),P(t=>{var r,n;return null!==(n=null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.logs)&&void 0!==n?n:[]}),C(t=>{var r,n;let s=JSON.parse(null!==(n=null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.devices)&&void 0!==n?n:[]);return(null==s?void 0:s.length)!==(null==t?void 0:t.length)&&k(new Date),s})}).catch(()=>{})},100);return()=>clearInterval(e)},[y,N]);let _=()=>{b({plugins:{legend:{labels:{color:"#495057"}}},scales:{x:{ticks:{color:"#495057"},grid:{color:"#ebedef"}},y:{ticks:{color:"#495057"},grid:{color:"#ebedef"}}}})},V=()=>{b({plugins:{legend:{labels:{color:"#ebedef"}}},scales:{x:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}},y:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}}}})};return(0,l.useEffect)(()=>{"light"===g.colorScheme?_():V()},[g.colorScheme]),(0,n.jsxs)("div",{className:"grid fadeIn",children:[(0,n.jsx)(h.F,{ref:t}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:y?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:j})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:y&&S?"Connected":"Disconnected"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:O})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Devices"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(e=null==E?void 0:E.length)&&void 0!==e?e:0})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-android text-blue-500 text-xl"})})]}),(0,n.jsx)(u.Z,{date:T})]})}),(0,n.jsx)("div",{className:"col-12 lg:col-6 xl:col-3",children:(0,n.jsxs)("div",{className:"card mb-0",children:[(0,n.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Notifications"}),(0,n.jsx)("div",{className:"text-900 font-medium text-xl",children:"0"})]}),(0,n.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,n.jsx)("i",{className:"pi pi-comment text-blue-500 text-xl"})})]}),(0,n.jsx)("span",{className:"text-green-500 font-bold",children:"1 "}),(0,n.jsx)("span",{className:"text-500",children:"minute ago"})]})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)(i.w,{header:()=>(0,n.jsxs)("div",{className:"flex flex-wrap align-items-center justify-content-between",children:[" ",(0,n.jsx)("span",{className:"text-xl text-900 font-bold",children:"Device Auto Discovery"}),(0,n.jsx)(s.z,{icon:"pi pi-refresh",loading:A,onClick:()=>{R(!0),N({type:"DEVICES-SEARCH"},e=>"DEVICES-SEARCH"===e.type,6e3).then(e=>{(null==e?void 0:e.message)==="OK"?t.current.show({severity:"success",summary:"Machine Discovered!",detail:"The mDNS has discovered new machines."}):t.current.show({severity:"error",summary:"Error Occurred.",detail:"The mDNS failed to discover services."}),R(!1)}).catch(e=>{let r=e.message||"An unexpected error occurred.";t.current.show({severity:"error",summary:"Error Occurred.",detail:r,life:5e3}),R(!1)})}})]}),removableSort:!0,loading:!y,value:E,emptyMessage:(0,n.jsxs)("p",{children:["Searching for machines running XCASTER",(0,n.jsx)(f,{delay:200})]}),rows:5,paginator:!0,responsiveLayout:"scroll",children:[(0,n.jsx)(o.s,{frozen:!0,field:"hostname",header:"Hostname",sortable:!0,style:{width:"25%"},body:e=>(0,n.jsx)("span",{className:"text-lg",children:e.hostname})}),(0,n.jsx)(o.s,{field:"server",header:"Server",style:{width:"25%"}}),(0,n.jsx)(o.s,{field:"address",header:"Address",style:{width:"25%"}}),(0,n.jsx)(o.s,{style:{width:"25%"},header:"Status",body:e=>(0,n.jsx)("div",{children:(0,n.jsx)(c.V,{className:(null==e?void 0:e.status)==="CONNECTING"?"animate-pulse-fast":(null==e?void 0:e.status)==="DISCONNECTED"?"animate-pulse":"",severity:e.connected?"success":(null==e?void 0:e.status)==="CONNECTED"?"success":(null==e?void 0:e.status)==="CONNECTING"?"warning":"danger",value:e.connected?"Connected":(null==e?void 0:e.status)==="CONNECTED"?"Connected":(null==e?void 0:e.status)==="CONNECTING"?"Connecting":"Disconnected",rounded:!0})})}),(0,n.jsx)(o.s,{header:"View",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.z,{loading:r[null==e?void 0:e.server],disabled:!y||(null==e?void 0:e.status)!=="CONNECTED",icon:"pi pi-search",text:!0,onClick:()=>{let r=null==e?void 0:e.server;if(!r){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}m(e=>({...e,[r]:!0})),t.current.show({severity:"contrast",summary:"Redirecting...",detail:"You are being redirected to the machine control panel..."}),I.replace("/device/stats?server="+r)}})})}),(0,n.jsx)(o.s,{header:"Control",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.z,{loading:r[null==e?void 0:e.server],disabled:!y||(null==e?void 0:e.status)!=="CONNECTED",icon:"pi pi-desktop",text:!0,onClick:()=>{let r=null==e?void 0:e.server;if(!r){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}m(e=>({...e,[r]:!0})),t.current.show({severity:"info",summary:"Redirecting...",detail:"You are being redirected to the machine control panel..."}),I.replace("/device?server="+r)}})})}),(0,n.jsx)(o.s,{header:"Reboot",body:e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.z,{loading:r[null==e?void 0:e.server],disabled:!y||(null==e?void 0:e.status)!=="CONNECTED",className:"text-red-500",icon:"pi pi-sync",text:!0,onClick:()=>{if(y){let r=null==e?void 0:e.server;if(!r){t.current.show({severity:"error",summary:"Server Not Found!",detail:"The server was not found."});return}m(e=>({...e,[r]:!0})),N({type:"DEVICE-REBOOT",message:r},e=>"DEVICE-REBOOT"===e.type,5e3).then(e=>{t.current.show({severity:"success",summary:"Server Rebooting!",detail:"The command was sent to the machine."}),m(e=>({...e,[r]:!1}))}).catch(()=>{t.current.show({severity:"error",summary:"Server Unresponsive!",detail:"The server did not respond in time."}),m(e=>({...e,[r]:!1}))})}}})})})]})})}),(0,n.jsx)("div",{className:"col-12",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"40rem"},children:M.map((e,t)=>(0,n.jsx)(p.Z,{log:e},t))})})})]})}},7389:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9268),s=r(6006);let o=e=>{let t=new Date-new Date(e),r=Math.floor(t/1e3),n=Math.floor(r/31536e3);return n>1?"".concat(n," years ago"):(n=Math.floor(r/2592e3))>1?"".concat(n," months ago"):(n=Math.floor(r/86400))>1?"".concat(n," days ago"):(n=Math.floor(r/3600))>1?"".concat(n," hours ago"):(n=Math.floor(r/60))>1?"".concat(n," minutes ago"):r>=1?"".concat(r," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var i=e=>{let{date:t,className:r}=e,[i,l]=(0,s.useState)("");return(0,s.useEffect)(()=>{l(o(t));let e=setInterval(()=>{l(o(t))},100);return()=>clearInterval(e)},[t]),(0,n.jsx)("span",{className:r,children:i})}},8671:function(e,t,r){"use strict";r.d(t,{V:function(){return o},a:function(){return i}});var n=r(9268),s=r(6006);let o=(0,s.createContext)({}),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)({inputStyle:"outlined",menuMode:"static",colorScheme:"dark",theme:"lara-dark-indigo",scale:14}),[l,a]=(0,s.useState)({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1}),c=()=>"overlay"===r.menuMode,d=()=>window.innerWidth>991;return(0,n.jsx)(o.Provider,{value:{layoutConfig:r,setLayoutConfig:i,layoutState:l,setLayoutState:a,onMenuToggle:()=>{c()&&a(e=>({...e,overlayMenuActive:!e.overlayMenuActive})),d()?a(e=>({...e,staticMenuDesktopInactive:!e.staticMenuDesktopInactive})):a(e=>({...e,staticMenuMobileActive:!e.staticMenuMobileActive}))},showProfileSidebar:()=>{a(e=>({...e,profileSidebarVisible:!e.profileSidebarVisible}))}},children:t})}},7537:function(e,t,r){"use strict";r.r(t),r.d(t,{WebSocketProvider:function(){return i},WebsocketContext:function(){return o}});var n=r(9268),s=r(6006);let o=(0,s.createContext)({}),i=e=>{let{children:t,url:r}=e,[i,l]=(0,s.useState)(!1),[a,c]=(0,s.useState)(new Date),d=(0,s.useRef)(null);return(0,s.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(r),d.current.onopen=()=>{l(!0)},d.current.onclose=()=>(l(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),l(!1)}})(),()=>{d.current&&d.current.close()}),[r]),(0,s.useEffect)(()=>{c(new Date)},[i]),(0,n.jsx)(o.Provider,{value:{isConnected:i,lastConnectionUpdate:a,sendMessageAndWaitForCondition:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return i?(d.current.send(JSON.stringify(e)),new Promise((e,n)=>{let s=r=>{let n=JSON.parse(r.data);if(t(n)){d.current.removeEventListener("message",s),clearTimeout(o);let t=n.message;n.message=JSON.parse(t),e(n)}},o=setTimeout(()=>{d.current.removeEventListener("message",s),n(Error("Timeout: Condition not met within ".concat(r," ms")))},r);d.current.addEventListener("message",s)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!i)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let r=e=>{let n=JSON.parse(e.data);t(n)&&d.current.removeEventListener("message",r)};d.current.addEventListener("message",r)},socket:d,sendMessage:e=>{if(!i)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},2723:function(e,t,r){"use strict";var n=r(9268);r(6006);var s=r(2153),o=r.n(s);let i=new(o())({fg:"#FFF",bg:"#000",newline:!0,escapeXML:!1,stream:!1}),l=e=>{var t,r;return i.toHtml(null!==(r=null==e?void 0:null===(t=e.replace("\x1b[?2004h","\x1b[92m"))||void 0===t?void 0:t.replace("\x1b[?2004l",""))&&void 0!==r?r:"")};t.Z=e=>{let{log:t}=e,r=l(t);return(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:r}})}},3429:function(e,t,r){"use strict";r.d(t,{V:function(){return u}});var n=r(6006),s=r(3142),o=r(6878),i=r(5942);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r){var n;return n=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=o.V.extend({defaultProps:{__TYPE:"Tag",value:null,severity:null,rounded:!1,icon:null,style:null,className:null,children:void 0},css:{classes:{value:"p-tag-value",icon:"p-tag-icon",root:function(e){var t=e.props;return(0,i.AK)("p-tag p-component",a(a({},"p-tag-".concat(t.severity),null!==t.severity),"p-tag-rounded",t.rounded))}},styles:"\n@layer primereact {\n    .p-tag {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    .p-tag-icon,\n    .p-tag-value,\n    .p-tag-icon.pi {\n        line-height: 1.5;\n    }\n    \n    .p-tag.p-tag-rounded {\n        border-radius: 10rem;\n    }\n}\n"}});function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var u=n.forwardRef(function(e,t){var r=n.useContext(s.Ou),l=c.getProps(e,r),u=c.setMetaData({props:l}),m=u.ptm,v=u.cx,f=u.isUnstyled;(0,o.e)(c.css.styles,f,{name:"tag"});var h=n.useRef(null),p=(0,i.dG)({className:v("icon")},m("icon")),x=i.Cz.getJSXIcon(l.icon,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},p),{props:l});n.useImperativeHandle(t,function(){return{props:l,getElement:function(){return h.current}}});var b=(0,i.dG)({ref:h,className:(0,i.AK)(l.className,v("root")),style:l.style},c.getOtherProps(l),m("root")),g=(0,i.dG)({className:v("value")},m("value"));return n.createElement("span",b,x,n.createElement("span",g,l.value),n.createElement("span",null,l.children))});u.displayName="Tag"},7611:function(e,t,r){"use strict";var n=r(6054);function s(){}function o(){}o.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,o,i){if(i!==n){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:s};return r.PropTypes=r,r}},9497:function(e,t,r){e.exports=r(7611)()},6054:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[8123,434,6878,6789,8285,9933,3081,845,2087,4046,6986,7136,4959,4074,9253,5769,1744],function(){return e(e.s=9386)}),_N_E=e.O()}]);
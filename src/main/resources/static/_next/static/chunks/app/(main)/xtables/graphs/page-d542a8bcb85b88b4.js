(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9971],{67:function(){},2061:function(){},109:function(e,t,n){Promise.resolve().then(n.bind(n,3449))},3449:function(e,t,n){"use strict";n.r(t);var l=n(9268),s=n(6006),a=n(8671),r=n(7490),i=n(3702),o=n(439),c=n(3621),d=n(7537),u=n(7389),m=n(845),v=n(4046),h=n(4390),p=n(315),f=n(5942),x=n(6595),g=n(8176),b=n(8298),y=n(2059),j=n(2469);t.default=()=>{var e,t,n,S,N,k,C,w,T;let E=(0,s.useRef)(),[O,A]=(0,s.useState)({}),[D,M]=(0,s.useState)(!1),{isConnected:L,lastConnectionUpdate:P,sendMessageAndWaitForCondition:I}=(0,s.useContext)(d.WebsocketContext),[_,R]=(0,s.useState)(!1),[W,V]=(0,s.useState)(new Date),[B,Z]=(0,s.useState)({}),[F,J]=(0,s.useState)({name:"Line Chart",type:"line"}),{layoutConfig:K}=(0,s.useContext)(a.V),z=(0,s.useRef)(null),[X,H]=(0,s.useState)(1e3),[U,q]=(0,s.useState)(!1),[G,Y]=(0,s.useState)([]),Q=getComputedStyle(document.documentElement),[$,ee]=(0,s.useState)(null),[et,en]=(0,s.useState)(""),[el,es]=(0,s.useState)();(0,s.useEffect)(()=>{let e=setInterval(()=>{L&&I({type:"XTABLES-DATA"},e=>"XTABLES-DATA"===e.type).then(e=>{if(R(t=>{var n,l,s,a;return(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.connected)!==t&&V(new Date),(null==e?void 0:null===(l=e.message)||void 0===l?void 0:l.connected)||q(!1),null!==(a=null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.connected)&&void 0!==a&&a}),U){let t=new Date().toISOString(),n=function(e){let t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{let[l,s]=e,a={key:n?"".concat(n,".").concat(l):l,name:l};return"object"==typeof s&&null!==s?(s.hasOwnProperty("value")&&(a.value=s.value,a.type=(typeof JSON.parse(s.value)).toString()),s.data&&(a.data=t(s.data,a.key))):(a.value=s,a.type=(typeof JSON.parse(s)).toString()),a})};return t(e)}(JSON.parse(e.message.json))||[],l=(e,t)=>{for(let n of e){if(n.key===t)return n;if(n.data){let e=l(n.data,t);if(e)return e}}return null};es(e=>{let s={time:t};return G.forEach(e=>{let t=l(n,e);t&&(s[t.key]=null==t?void 0:t.value)}),[s,...e||[]]}),Z(e=>{var s,a;let r=!1,i=((null===(s=e.lineData)||void 0===s?void 0:s.datasets)||[]).map(e=>({...e})),o=[...(null===(a=e.lineData)||void 0===a?void 0:a.labels)||[]];return(G.forEach(e=>{let t=i.find(t=>t.label===e),s=l(n,e),a=null==s?void 0:s.value;s&&(t||(t={label:e,data:[],fill:!1,tension:.4},i.push(t)),t.data=[...t.data||[],a],r=!0)}),r)?(o.push(t),{lineData:{labels:o,datasets:i}}):e})}}).catch(()=>{})},X),t=setInterval(()=>{L&&I({type:"XTABLES-STATUS"},e=>"XTABLES-STATUS"===e.type).then(e=>{R(t=>{var n,l,s;return(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.connected)!==t&&V(new Date),null!==(s=null==e?void 0:null===(l=e.message)||void 0===l?void 0:l.connected)&&void 0!==s&&s})}).catch(()=>{})},500);return()=>{clearInterval(e),clearInterval(t)}},[L,I,X,U]),(0,s.useEffect)(()=>{let e=Q.getPropertyValue("--text-color")||"#495057",t=Q.getPropertyValue("--text-color-secondary")||"#6c757d",n=Q.getPropertyValue("--surface-border")||"#dfe7ef";A({lineOptions:{plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:t},grid:{color:n},border:{display:!1}},y:{ticks:{color:t},grid:{color:n},border:{display:!1}}}}})},[K]);let ea=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:()=>{M(!1),en(null)}}),(0,l.jsx)(i.z,{disabled:null!==(0,x.Z)(et),label:"Save",icon:"pi pi-check",onClick:()=>{M(!1),Y(e=>(e.push(et),e)),en(null)}})]});return(0,l.jsxs)("div",{className:"grid p-fluid fadeIn",children:[(0,l.jsx)(v.F,{ref:z}),(0,l.jsx)(h.V,{style:{width:"450px"},visible:D,header:"Key Details",modal:!0,className:"p-fluid",footer:ea,onHide:()=>{M(!1),en(null)},children:(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{htmlFor:"key",children:"Key Name"}),(0,l.jsx)(p.o,{id:"key",value:et,onChange:e=>{en(e.target.value)},required:!0,autoFocus:!0,className:(0,f.AK)({"p-invalid":null!==(0,x.Z)(et)})}),null===(0,x.Z)(et)?null:(0,l.jsx)("small",{className:"p-invalid",children:(0,x.Z)(et)})]})}),(0,l.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,l.jsxs)("div",{className:"card mb-0",children:[(0,l.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,l.jsxs)("div",{className:"text-900 font-medium text-xl "+(L?"text-green-600":"text-red-600 animate-pulse"),children:[" ",L?"Connected":"Disconnected"]})]}),(0,l.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,l.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,l.jsx)(u.Z,{date:P})]})}),(0,l.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,l.jsxs)("div",{className:"card mb-0",children:[(0,l.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,l.jsx)("div",{className:"text-900 font-medium text-xl "+(L&&_?"text-green-600":"text-red-600 animate-pulse"),children:L&&_?"Connected":"Disconnected"})]}),(0,l.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,l.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,l.jsx)(u.Z,{date:W})]})}),(0,l.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,l.jsxs)("div",{className:"card mb-0",children:[(0,l.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Intervals Recorded"}),(0,l.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(n=null==el?void 0:el.length)&&void 0!==n?n:0})]}),(0,l.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,l.jsx)("i",{className:"pi pi-database text-blue-500 text-xl"})})]}),(0,l.jsx)(u.Z,{date:W})]})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsx)("div",{className:"col-12 lg:col-3",children:(0,l.jsx)(i.z,{disabled:U||!L||!_,label:"Add",icon:"pi pi-plus",onClick:()=>{M(!0)}})}),(0,l.jsx)("div",{className:"col-12 md:col-3",children:(0,l.jsxs)("div",{className:"p-inputgroup",children:[(0,l.jsx)(i.z,{onClick:()=>{Y(e=>{let t=e.indexOf($);return -1===t?(z.current.show({severity:"error",summary:"Failure",detail:"The key was not found."}),e):(e.splice(t,1).length>0?(ee(null),z.current.show({severity:"success",summary:"Success",detail:"The key was removed."})):z.current.show({severity:"error",summary:"Failure",detail:"The key could not be removed."}),e)}),ee(null)},disabled:U||!L||!_||!(null==G?void 0:G.length),severity:"danger",label:"Remove"}),(0,l.jsx)(m.L,{disabled:U||!L||!_||!(null==G?void 0:G.length),value:$,onChange:e=>{ee(e.value)},options:G,placeholder:"Delete Key"})]})}),(0,l.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,l.jsx)(o.R,{disabled:U||!L||!_,value:X,onValueChange:e=>H(null!==(S=e.value)&&void 0!==S?S:100),suffix:" millisecond".concat(X>1?"s":""," per record")})}),(0,l.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,l.jsx)(m.L,{disabled:U||!L||!_,value:F,onChange:e=>{J(e.value)},options:[{name:"Line Chart",type:"line"},{name:"Bar Chart",type:"bar"},{name:"Radar Chart",type:"radar"},{name:"Polar Area",type:"polarArea"},{name:"Pie Chart",type:"pie"},{name:"Doughnut Chart",type:"doughnut"}],optionLabel:"name",placeholder:"Select Chart"})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(i.z,{disabled:!L||!_||U||!(null==B?void 0:null===(t=B.lineData)||void 0===t?void 0:null===(e=t.labels)||void 0===e?void 0:e.length)&&!(null===(N=null==el?void 0:el.length)||void 0===N||N)&&!(null===(k=null==G?void 0:G.length)||void 0===k||k),label:"Reset",severity:"danger",onClick:()=>{Z({}),es([]),Y([]),z.current.show({severity:"success",summary:"Success",detail:"All settings and charts reset."})}})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(c.C,{disabled:!L||!_||!(null==G?void 0:G.length),onLabel:"Stop Recording",offLabel:"Start Recording",checked:U,onChange:e=>q(e.value)})})]})})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsx)(r.k,{type:null!==(C=null==F?void 0:F.type)&&void 0!==C?C:"line",data:B.lineData,options:O.lineOptions})})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("div",{className:"card",children:(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(i.z,{disabled:(null!==(w=null==el?void 0:el.length)&&void 0!==w?w:0)===0,label:"Export CSV",icon:"pi pi-file",onClick:()=>{E.current.exportCSV({selectionOnly:!1})}})}),(0,l.jsx)("div",{className:"col-6",children:(0,l.jsx)(i.z,{disabled:(null!==(T=null==el?void 0:el.length)&&void 0!==T?T:0)===0,severity:"success",label:"Export Excel",icon:"pi pi-file-excel",onClick:()=>{(0,y.r)("XTABLES-GRAPHS",el)}})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsxs)(g.w,{scrollable:!0,virtualScrollerOptions:{itemSize:15},scrollHeight:"500px",ref:E,emptyMessage:(0,j.Z)({message:L?_?"There is no data recorded":"Connecting to XTABLES":"Connecting to backend"}),value:L&&_?el:[],children:[L&&_&&(null!=el?el:[]).length>0&&(0,l.jsx)(b.s,{field:"time",header:"Time"}),(null!=el?el:[]).length>0&&G.map((e,t)=>(0,l.jsx)(b.s,{field:e,header:e},t))]})})]})})})]})}},7389:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var l=n(9268),s=n(6006);let a=e=>{let t=new Date-new Date(e),n=Math.floor(t/1e3),l=Math.floor(n/31536e3);return l>1?"".concat(l," years ago"):(l=Math.floor(n/2592e3))>1?"".concat(l," months ago"):(l=Math.floor(n/86400))>1?"".concat(l," days ago"):(l=Math.floor(n/3600))>1?"".concat(l," hours ago"):(l=Math.floor(n/60))>1?"".concat(l," minutes ago"):n>=1?"".concat(n," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var r=e=>{let{date:t,className:n}=e,[r,i]=(0,s.useState)("");return(0,s.useEffect)(()=>{i(a(t));let e=setInterval(()=>{i(a(t))},100);return()=>clearInterval(e)},[t]),(0,l.jsx)("span",{className:n,children:r})}},2469:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var l=n(9268),s=n(7690),a=n(6006),r=n(9497),i=n.n(r);let o=e=>{let{delay:t=500}=e,[n,s]=(0,a.useState)("");return(0,a.useEffect)(()=>{let e=setInterval(()=>{s(e=>{switch(e){case"":return".";case".":return"..";case"..":return"...";default:return""}})},t);return()=>clearInterval(e)},[t]),(0,l.jsx)("span",{children:n})};o.propTypes={delay:i().number};let c=e=>{let{message:t,speed:n="normal",dotSpeed:a=400,...r}=e;return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,l.jsx)(s.E,{...r,className:"fast"===n?"animate-pulse-fast":"animate-pulse",alt:"XBOT ROBOTICS LOGO",src:"/images/logo/logo.png"}),t&&(0,l.jsxs)("p",{className:"font-bold",children:[null!=t?t:"Loading",(0,l.jsx)(o,{delay:a})]})]})};c.propType={message:i().number};var d=c},8671:function(e,t,n){"use strict";n.d(t,{V:function(){return a},a:function(){return r}});var l=n(9268),s=n(6006);let a=(0,s.createContext)({}),r=e=>{let{children:t}=e,[n,r]=(0,s.useState)({inputStyle:"outlined",menuMode:"static",colorScheme:"dark",theme:"lara-dark-indigo",scale:14}),[i,o]=(0,s.useState)({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1}),c=()=>"overlay"===n.menuMode,d=()=>window.innerWidth>991;return(0,l.jsx)(a.Provider,{value:{layoutConfig:n,setLayoutConfig:r,layoutState:i,setLayoutState:o,onMenuToggle:()=>{c()&&o(e=>({...e,overlayMenuActive:!e.overlayMenuActive})),d()?o(e=>({...e,staticMenuDesktopInactive:!e.staticMenuDesktopInactive})):o(e=>({...e,staticMenuMobileActive:!e.staticMenuMobileActive}))},showProfileSidebar:()=>{o(e=>({...e,profileSidebarVisible:!e.profileSidebarVisible}))}},children:t})}},7537:function(e,t,n){"use strict";n.r(t),n.d(t,{WebSocketProvider:function(){return r},WebsocketContext:function(){return a}});var l=n(9268),s=n(6006);let a=(0,s.createContext)({}),r=e=>{let{children:t,url:n}=e,[r,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(new Date),d=(0,s.useRef)(null);return(0,s.useEffect)(()=>((function e(){console.log("Connecting to websocket"),d.current=new WebSocket(n),d.current.onopen=()=>{i(!0)},d.current.onclose=()=>(i(!1),console.log("Disconnected from websocket."),e()),d.current.onerror=e=>{console.error("WebSocket Error: ",e),d.current.close(),i(!1)}})(),()=>{d.current&&d.current.close()}),[n]),(0,s.useEffect)(()=>{c(new Date)},[r]),(0,l.jsx)(a.Provider,{value:{isConnected:r,lastConnectionUpdate:o,sendMessageAndWaitForCondition:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return r?(d.current.send(JSON.stringify(e)),new Promise((e,l)=>{let s=n=>{let l=JSON.parse(n.data);if(t(l)){d.current.removeEventListener("message",s),clearTimeout(a);let t=l.message;l.message=JSON.parse(t),e(l)}},a=setTimeout(()=>{d.current.removeEventListener("message",s),l(Error("Timeout: Condition not met within ".concat(n," ms")))},n);d.current.addEventListener("message",s)})):Promise.reject(Error("WebSocket is not connected"))},sendMessageTillCondition:(e,t)=>{if(!r)throw Error("WebSocket is not connected");d.current.send(JSON.stringify(e));let n=e=>{let l=JSON.parse(e.data);t(l)&&d.current.removeEventListener("message",n)};d.current.addEventListener("message",n)},socket:d,sendMessage:e=>{if(!r)return Error("WebSocket is not connected");d.current.send(JSON.stringify(e))}},children:t})}},6595:function(e,t){"use strict";t.Z=function(e){if(null==e||""===e.trim())return"Key cannot be null or empty.";if(e.includes(" "))return"Key cannot contain spaces.";if(e.startsWith(".")||e.endsWith("."))return"Key cannot start or end with '.'";if(e.includes(".."))return"Key cannot contain multiple consecutive '.'";let t=e.split(".");for(let e of t)if(""===e.trim())return"Key contains empty part(s).";return null}},2059:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var l=n(9985),s=n(9219);let a=(e,t)=>{Promise.resolve().then(n.t.bind(n,9985,23)).then(n=>{let s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,l.saveAs)(s,t+"_export_"+new Date().getTime()+".xlsx")})},r=(e,t)=>{let n=s.P6.json_to_sheet(t),l=s.default.write({Sheets:{data:n},SheetNames:["data"]},{bookType:"xlsx",type:"array"});a(l,e)}},7611:function(e,t,n){"use strict";var l=n(6054);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,r){if(r!==l){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},9497:function(e,t,n){e.exports=n(7611)()},6054:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[8123,5087,434,6878,6789,8285,9933,845,2087,7136,9217,4046,769,1280,9253,5769,1744],function(){return e(e.s=109)}),_N_E=e.O()}]);
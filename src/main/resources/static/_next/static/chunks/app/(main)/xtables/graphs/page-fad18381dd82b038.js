(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9971],{109:function(e,t,n){Promise.resolve().then(n.bind(n,3449))},3449:function(e,t,n){"use strict";n.r(t);var r=n(9268),l=n(6006),o=n(8671),a=n(7490),s=n(3702),i=n(439),c=n(3621),u=n(7537),d=n(7389),p=n(845),f=n(4046),m=n(4390),h=n(315),v=n(5942),b=n(6595);t.default=()=>{var e,t,n,g,y,x,j;let[N,S]=(0,l.useState)({}),[w,k]=(0,l.useState)(!1),{isConnected:C,lastConnectionUpdate:O,sendMessageAndWaitForCondition:P}=(0,l.useContext)(u.WebsocketContext),[E,D]=(0,l.useState)(!1),[L,I]=(0,l.useState)(new Date),[M,A]=(0,l.useState)({}),[T,F]=(0,l.useState)({name:"Line Chart",type:"line"}),{layoutConfig:R}=(0,l.useContext)(o.V),K=(0,l.useRef)(null),[V,B]=(0,l.useState)(1e3),[W,_]=(0,l.useState)(!1),[Z,z]=(0,l.useState)([]),J=getComputedStyle(document.documentElement),[G,H]=(0,l.useState)(null),[X,Y]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=setInterval(()=>{C&&P({type:"XTABLES-DATA"},e=>"XTABLES-DATA"===e.type).then(e=>{if(D(t=>(e.message.connected!==t&&I(new Date),e.message.connected||_(!1),e.message.connected)),W){let t=function(e){let t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{let[r,l]=e,o={key:n?"".concat(n,".").concat(r):r,name:r};return"object"==typeof l&&null!==l?(l.hasOwnProperty("value")&&(o.value=l.value,o.type=(typeof JSON.parse(l.value)).toString()),l.data&&(o.data=t(l.data,o.key))):(o.value=l,o.type=(typeof JSON.parse(l)).toString()),o})};return t(e)}(JSON.parse(e.message.json))||[],n=(e,t)=>{for(let r of e){if(r.key===t)return r;if(r.data){let e=n(r.data,t);if(e)return e}}return null};A(e=>{var r,l;let o=[...(null===(r=e.lineData)||void 0===r?void 0:r.labels)||[],new Date],a=((null===(l=e.lineData)||void 0===l?void 0:l.datasets)||[]).map(e=>({...e}));return Z.forEach(e=>{let r=a.find(t=>t.label===e),l=n(t,e),o=null==l?void 0:l.value;l&&"number"===l.type&&(r||(r={label:e,data:[],fill:!1,tension:.4},a.push(r)),r.data=[...r.data||[],parseFloat(o)])}),{lineData:{labels:o,datasets:a}}})}}).catch(()=>{})},V);return()=>clearInterval(e)},[C,P,V,W]),(0,l.useEffect)(()=>{let e=J.getPropertyValue("--text-color")||"#495057",t=J.getPropertyValue("--text-color-secondary")||"#6c757d",n=J.getPropertyValue("--surface-border")||"#dfe7ef";S({lineOptions:{plugins:{legend:{labels:{color:e}}},scales:{x:{ticks:{color:t},grid:{color:n},border:{display:!1}},y:{ticks:{color:t},grid:{color:n},border:{display:!1}}}}})},[R]);let q=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:()=>{k(!1),Y(null)}}),(0,r.jsx)(s.z,{disabled:null!==(0,b.Z)(X),label:"Save",icon:"pi pi-check",onClick:()=>{k(!1),z(e=>(e.push(X),e)),Y(null)}})]});return(0,r.jsxs)("div",{className:"grid p-fluid",children:[(0,r.jsx)(f.F,{ref:K}),(0,r.jsx)(m.V,{style:{width:"450px"},visible:w,header:"Key Details",modal:!0,className:"p-fluid",footer:q,onHide:()=>{k(!1),Y(null)},children:(0,r.jsxs)("div",{className:"field",children:[(0,r.jsx)("label",{htmlFor:"key",children:"Key Name"}),(0,r.jsx)(h.o,{id:"key",value:X,onChange:e=>{Y(e.target.value)},required:!0,autoFocus:!0,className:(0,v.AK)({"p-invalid":null!==(0,b.Z)(X)})}),null===(0,b.Z)(X)?null:(0,r.jsx)("small",{className:"p-invalid",children:(0,b.Z)(X)})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Backend Status"}),(0,r.jsxs)("div",{className:"text-900 font-medium text-xl "+(C?"text-green-600":"text-red-600 animate-pulse"),children:[" ",C?"Connected":"Disconnected"]})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-chevron-circle-up text-blue-500 text-xl"})})]}),(0,r.jsx)(d.Z,{date:O})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"XTABLES Status"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl "+(C&&E?"text-green-600":"text-red-600 animate-pulse"),children:C&&E?"Connected":"Disconnected"})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-table text-blue-500 text-xl"})})]}),(0,r.jsx)(d.Z,{date:L})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-6 xl:col-4",children:(0,r.jsxs)("div",{className:"card mb-0",children:[(0,r.jsxs)("div",{className:"flex justify-content-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-500 font-medium mb-3",children:"Intervals Recorded"}),(0,r.jsx)("div",{className:"text-900 font-medium text-xl",children:null!==(y=null==M?void 0:null===(t=M.lineData)||void 0===t?void 0:null===(e=t.labels)||void 0===e?void 0:e.length)&&void 0!==y?y:0})]}),(0,r.jsx)("div",{className:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"},children:(0,r.jsx)("i",{className:"pi pi-database text-blue-500 text-xl"})})]}),(0,r.jsx)(d.Z,{date:L})]})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"grid",children:[(0,r.jsx)("div",{className:"col-12 lg:col-3",children:(0,r.jsx)(s.z,{disabled:W||!C||!E,label:"Add",icon:"pi pi-plus",onClick:()=>{k(!0)}})}),(0,r.jsx)("div",{className:"col-12 md:col-3",children:(0,r.jsxs)("div",{className:"p-inputgroup",children:[(0,r.jsx)(s.z,{onClick:()=>{z(e=>{let t=e.indexOf(G);return -1===t?(K.current.show({severity:"error",summary:"Failure",detail:"The key was not found."}),e):(e.splice(t,1).length>0?(H(null),K.current.show({severity:"success",summary:"Success",detail:"The key was removed."})):K.current.show({severity:"error",summary:"Failure",detail:"The key could not be removed."}),e)}),H(null)},disabled:W||!C||!E||!(null==Z?void 0:Z.length),severity:"danger",label:"Remove"}),(0,r.jsx)(p.L,{disabled:W||!C||!E||!(null==Z?void 0:Z.length),value:G,onChange:e=>{H(e.value)},options:Z,placeholder:"Delete Key"})]})}),(0,r.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,r.jsx)(i.R,{disabled:W||!C||!E,value:V,onValueChange:e=>B(null!==(x=e.value)&&void 0!==x?x:100),suffix:" millisecond".concat(V>1?"s":""," per record")})}),(0,r.jsx)("div",{className:"col-12 lg:col-3 ",children:(0,r.jsx)(p.L,{disabled:W||!C||!E,value:T,onChange:e=>{F(e.value)},options:[{name:"Line Chart",type:"line"},{name:"Bar Chart",type:"bar"},{name:"Radar Chart",type:"radar"},{name:"Polar Area",type:"polarArea"},{name:"Pie Chart",type:"pie"},{name:"Doughnut Chart",type:"doughnut"}],optionLabel:"name",placeholder:"Select Chart"})}),(0,r.jsx)("div",{className:"col-6",children:(0,r.jsx)(s.z,{disabled:!C||!E||!(null==M?void 0:null===(g=M.lineData)||void 0===g?void 0:null===(n=g.labels)||void 0===n?void 0:n.length),label:"Reset",severity:"danger",onClick:()=>{A({}),K.current.show({severity:"success",summary:"Success",detail:"The chart data was cleared."})}})}),(0,r.jsx)("div",{className:"col-6",children:(0,r.jsx)(c.C,{disabled:!C||!E||!(null==Z?void 0:Z.length),onLabel:"Stop Recording",offLabel:"Start Recording",checked:W,onChange:e=>_(e.value)})})]})})}),(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)(a.k,{type:null!==(j=null==T?void 0:T.type)&&void 0!==j?j:"line",data:M.lineData,options:N.lineOptions})})})]})}},7389:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9268),l=n(6006);let o=e=>{let t=new Date-new Date(e),n=Math.floor(t/1e3),r=Math.floor(n/31536e3);return r>1?"".concat(r," years ago"):(r=Math.floor(n/2592e3))>1?"".concat(r," months ago"):(r=Math.floor(n/86400))>1?"".concat(r," days ago"):(r=Math.floor(n/3600))>1?"".concat(r," hours ago"):(r=Math.floor(n/60))>1?"".concat(r," minutes ago"):n>=1?"".concat(n," seconds ago"):t>1?"".concat(t," milliseconds ago"):"just now"};var a=e=>{let{date:t,className:n}=e,[a,s]=(0,l.useState)("");return(0,l.useEffect)(()=>{s(o(t));let e=setInterval(()=>{s(o(t))},100);return()=>clearInterval(e)},[t]),(0,r.jsx)("span",{className:n,children:a})}},8671:function(e,t,n){"use strict";n.d(t,{V:function(){return o},a:function(){return a}});var r=n(9268),l=n(6006);let o=(0,l.createContext)({}),a=e=>{let{children:t}=e,[n,a]=(0,l.useState)({inputStyle:"outlined",menuMode:"static",colorScheme:"dark",theme:"lara-dark-indigo",scale:14}),[s,i]=(0,l.useState)({staticMenuDesktopInactive:!1,overlayMenuActive:!1,profileSidebarVisible:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1}),c=()=>"overlay"===n.menuMode,u=()=>window.innerWidth>991;return(0,r.jsx)(o.Provider,{value:{layoutConfig:n,setLayoutConfig:a,layoutState:s,setLayoutState:i,onMenuToggle:()=>{c()&&i(e=>({...e,overlayMenuActive:!e.overlayMenuActive})),u()?i(e=>({...e,staticMenuDesktopInactive:!e.staticMenuDesktopInactive})):i(e=>({...e,staticMenuMobileActive:!e.staticMenuMobileActive}))},showProfileSidebar:()=>{i(e=>({...e,profileSidebarVisible:!e.profileSidebarVisible}))}},children:t})}},7537:function(e,t,n){"use strict";n.r(t),n.d(t,{WebSocketProvider:function(){return a},WebsocketContext:function(){return o}});var r=n(9268),l=n(6006);let o=(0,l.createContext)({}),a=e=>{let{children:t,url:n}=e,[a,s]=(0,l.useState)(!1),[i,c]=(0,l.useState)(new Date),u=(0,l.useRef)(null);return(0,l.useEffect)(()=>((function e(){console.log("Connecting to websocket"),u.current=new WebSocket(n),u.current.onopen=()=>{s(!0)},u.current.onclose=()=>(s(!1),console.log("Disconnected from websocket."),e()),u.current.onerror=e=>{console.error("WebSocket Error: ",e),u.current.close(),s(!1)}})(),()=>{u.current&&u.current.close()}),[n]),(0,l.useEffect)(()=>{c(new Date)},[a]),(0,r.jsx)(o.Provider,{value:{isConnected:a,lastConnectionUpdate:i,sendMessageAndWaitForCondition:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;return a?(u.current.send(JSON.stringify(e)),new Promise((e,r)=>{let l=n=>{let r=JSON.parse(n.data);if(t(r)){u.current.removeEventListener("message",l),clearTimeout(o);let t=r.message;r.message=JSON.parse(t),e(r)}},o=setTimeout(()=>{u.current.removeEventListener("message",l),r(Error("Timeout: Condition not met within ".concat(n," ms")))},n);u.current.addEventListener("message",l)})):Promise.reject(Error("WebSocket is not connected"))}},children:t})}},6595:function(e,t){"use strict";t.Z=function(e){if(null==e||""===e.trim())return"Key cannot be null or empty.";if(e.includes(" "))return"Key cannot contain spaces.";if(e.startsWith(".")||e.endsWith("."))return"Key cannot start or end with '.'";if(e.includes(".."))return"Key cannot contain multiple consecutive '.'";let t=e.split(".");for(let e of t)if(""===e.trim())return"Key contains empty part(s).";return null}},7490:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var r=n(6006),l=n(3142),o=n(465),a=n(5942),s=n(6878),i=s.V.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0},css:{classes:{root:function(e){var t=e.props;return(0,a.AK)("p-chart",t.className)}},inlineStyles:{root:function(e){var t=e.props;return Object.assign({width:t.width,height:t.height},t.style)}},styles:"\n        @layer primereact {\n            .p-chart {\n                position: relative\n            }\n        }\n        "}}),c=function(){try{return Chart}catch(e){return null}}(),u=r.memo(r.forwardRef(function(e,t){var u=r.useContext(l.Ou),d=i.getProps(e,u),p=i.setMetaData({props:d}),f=p.ptm,m=p.cx,h=p.sx,v=p.isUnstyled;(0,s.e)(i.css.styles,v,{name:"chart"});var b=r.useRef(null),g=r.useRef(null),y=r.useRef(null),x=function(){j();var e={type:d.type,data:d.data,options:d.options,plugins:d.plugins};c?g.current=new c(y.current,e):Promise.all([n.e(804),n.e(109)]).then(n.bind(n,4096)).then(function(t){j(),y.current&&t&&(t.default?g.current=new t.default(y.current,e):g.current=new t(y.current,e))})},j=function(){g.current&&(g.current.destroy(),g.current=null)};r.useImperativeHandle(t,function(){return{props:d,getCanvas:function(){return y.current},getChart:function(){return g.current},getBase64Image:function(){return g.current.toBase64Image()},getElement:function(){return b.current},generateLegend:function(){return g.current&&g.current.generateLegend()},refresh:function(){return g.current&&g.current.update()}}}),r.useEffect(function(){x()}),(0,o.zq)(function(){j()});var N=d.options&&d.options.plugins&&d.options.plugins.title&&d.options.plugins.title.text,S=d.ariaLabel||N,w=(0,a.dG)({id:d.id,ref:b,style:h("root"),className:m("root")},i.getOtherProps(d),f("root")),k=(0,a.dG)({ref:y,width:d.width,height:d.height,role:"img","aria-label":S},f("canvas"));return r.createElement("div",w,r.createElement("canvas",k))}),function(e,t){return e.data===t.data&&e.options===t.options&&e.type===t.type});u.displayName="Chart"},3621:function(e,t,n){"use strict";n.d(t,{C:function(){return m}});var r=n(6006),l=n(3142),o=n(465),a=n(9347),s=n(9424),i=n(5942),c=n(6878);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=c.V.extend({defaultProps:{__TYPE:"ToggleButton",id:null,onIcon:null,offIcon:null,onLabel:"Yes",offLabel:"No",iconPos:"left",style:null,className:null,checked:!1,tabIndex:0,tooltip:null,tooltipOptions:null,onChange:null,onFocus:null,onBlur:null,children:void 0},css:{classes:{label:"p-button-label",icon:function(e){var t=e.props,n=e.label;return(0,i.AK)("p-button-icon p-c",{"p-button-icon-left":"left"===t.iconPos&&n,"p-button-icon-right":"right"===t.iconPos&&n})},root:function(e){var t=e.props,n=e.hasIcon,r=e.hasLabel;return(0,i.AK)("p-button p-togglebutton p-component",{"p-button-icon-only":n&&!r,"p-highlight":t.checked,"p-disabled":t.disabled},t.className)}}}});function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=r.memo(r.forwardRef(function(e,t){var n=r.useContext(l.Ou),m=p.getProps(e,n),h=r.useRef(null),v=p.setMetaData({props:m}),b=v.ptm,g=v.cx,y=v.isUnstyled;(0,c.e)(p.css.styles,y,{name:"togglebutton"});var x=m.onLabel&&m.onLabel.length>0&&m.offLabel&&m.offLabel.length>0,j=m.onIcon&&m.offIcon,N=x?m.checked?m.onLabel:m.offLabel:"&nbsp;",S=m.checked?m.onIcon:m.offIcon,w=function(e){!m.disabled&&m.onChange&&m.onChange({originalEvent:e,value:!m.checked,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:m.name,id:m.id,value:!m.checked}})};r.useImperativeHandle(t,function(){return{props:m,focus:function(){return i.p7.focusFirstElement(h.current)},getElement:function(){return h.current}}}),(0,o.nw)(function(){m.autoFocus&&i.p7.focusFirstElement(h.current)});var k=i.gb.isNotEmpty(m.tooltip),C=m.disabled?-1:m.tabIndex,O=function(){if(j){var e=(0,i.dG)({className:g("icon",{label:N})},b("icon"));return i.Cz.getJSXIcon(S,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){!function(e,t,n){var r;r=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===d(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),{props:m})}return null}(),P=(0,i.dG)({className:g("label")},b("label")),E=(0,i.dG)({ref:h,id:m.id,className:g("root",{hasIcon:j,hasLabel:x}),style:m.style,onClick:w,onFocus:m.onFocus,onBlur:m.onBlur,onKeyDown:function(e){32===e.keyCode&&(w(e),e.preventDefault())},tabIndex:C,role:"button","aria-pressed":m.checked},p.getOtherProps(m),b("root"));return r.createElement(r.Fragment,null,r.createElement("div",E,O,r.createElement("span",P,N),r.createElement(a.H,null)),k&&r.createElement(s.u,u({target:h,content:m.tooltip},m.tooltipOptions,{pt:b("tooltip")})))}));m.displayName="ToggleButton"}},function(e){e.O(0,[434,6878,6789,8285,9683,3081,9345,4046,4390,9253,5769,1744],function(){return e(e.s=109)}),_N_E=e.O()}]);